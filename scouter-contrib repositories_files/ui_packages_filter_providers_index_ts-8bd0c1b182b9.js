"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_filter_providers_index_ts"],{50348:(e,t,i)=>{i.d(t,{RY:()=>X,AR:()=>ArchivedFilterProvider,n5:()=>AssigneeFilterProvider,kr:()=>AsyncFilterProvider,Bc:()=>AuthorFilterProvider,dR:()=>BaseFilterProvider,ac:()=>BaseIssueFilterProvider,Qh:()=>BaseUserFilterProvider,rL:()=>BlockedBySearchFilterProvider,tQ:()=>BlockingSearchFilterProvider,Wq:()=>BooleanFilterProvider,ws:()=>ClosedFilterProvider,_N:()=>CommenterFilterProvider,Ge:()=>CommentsFilterProvider,_O:()=>CreatedFilterProvider,FZ:()=>DraftFilterProvider,Ws:()=>HeadFilterProvider,jd:()=>InBodyFilterProvider,z_:()=>InCommentsFilterProvider,HD:()=>InFilterProvider,$W:()=>InTitleFilterProvider,NT:()=>InteractionsFilterProvider,IL:()=>InvolvesFilterProvider,I4:()=>IsFilterProvider,aF:()=>LabelFilterProvider,a2:()=>LanguageFilterProvider,d$:()=>LinkedFilterProvider,Pd:()=>MentionsFilterProvider,Or:()=>MergedFilterProvider,Qq:()=>MilestoneFilterProvider,tW:()=>NestedFilterProvider,E:()=>OrgFilterProvider,$q:()=>ParentIssueFilterProvider,FG:()=>ProjectFilterProvider,WE:()=>ReactionsFilterProvider,Ag:()=>ReasonFilterProvider,pH:()=>RepositoryFilterProvider,A6:()=>ReviewFilterProvider,kL:()=>ReviewRequestedFilterProvider,sW:()=>ReviewedByFilterProvider,KX:()=>ShaFilterProvider,uB:()=>SortFilterProvider,PT:()=>StateFilterProvider,uy:()=>StaticFilterProvider,C2:()=>StatusFilterProvider,NN:()=>TeamFilterProvider,X_:()=>TeamReviewRequestedFilterProvider,pv:()=>UpdatedFilterProvider,Dv:()=>UserFilterProvider,LB:()=>UserReviewRequestedFilterProvider});var r=i(61407),s=i(491),a=i(18991),o=i(55581),l=i(90678),n=i(71073),d=i(62884);function u(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=new WeakMap;let v=class ValidationAbortController extends AbortController{abortIfChanged(e){var t;(void 0===e||e!==(t=u(this,p,"get"),t.get?t.get.call(this):t.value))&&this.abort()}constructor(e){super(),function(e,t,i){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,i)}(this,p,{writable:!0,value:void 0}),function(e,t,i){var r=u(e,t,"set");if(r.set)r.set.call(e,i);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=i}}(this,p,e)}};let AsyncFilterProvider=class AsyncFilterProvider extends d.A{abortPreviousSuggestionsRequests(){this.abortSuggestionsController.abort(),this.abortSuggestionsController=new AbortController}abortPreviousValidationRequests(e){this.abortValidationController.abortIfChanged(e?.raw),this.abortValidationController=new v(e?.raw)}getFilterValue(e,t){return t||((0,n.I8)((0,n.sF)(e)?(0,n.I8)(e.value?.values.at(-1)?.value):e.raw)??"")}getMetaSuggestions(e){return[]}async processSuggestions(e,t,i,r){if(!this.shouldGetSuggestions(t))return null;let s=(0,n.DS)(t,r);this.abortPreviousSuggestionsRequests();let a=this.abortSuggestionsController,o=await this.fetchSuggestions(s,t,e)??[],l=t.provider.key,d=[],u=(0,n.jL)(this.displayName,this.icon),c=(0,n.Ms)(this.displayName,this.icon),p=(0,n.m1)(l);(0,n.uT)(t)&&this.options.filterTypes.valueless&&!t.raw.startsWith("-")&&d.push(u),(0,n.uT)(t)&&this.options.filterTypes.hasValue&&!t.raw.startsWith("-")&&d.push(c),this.options.filterTypes.exclusive&&""===s&&(0,n.aK)(t)&&t.raw!==`-${l}:`&&d.unshift(p);let v=[...d,...[...o].map(t=>i(t,s,e))];for(let e of v)[u,c,p].includes(e)||this.prefetchedSuggestions.set(e.value,e);return a.signal.aborted?null:v}async validateFilterBlockValues(e,t,i){let r={},o=i.map(async(o,d)=>{let u=(0,n.M5)(o.value),c=i.findIndex(e=>(0,n.M5)(e.value)===u);if(!u||c<d&&c>=0){r[d]={...o,valid:!1,validations:[{type:l.b.EmptyValue,message:a.D.filterValueEmpty(this.key)}]};return}let p=this.prefetchedSuggestions.get(u),v=this.getMetaSuggestions(u)?.[0];if(p){r[d]={...o,...p,valid:!0,value:o.value};return}if(v?.value===u){r[d]={...o,...v,valid:!0,value:o.value};return}if(e.activeBlockId!==t.id){let t=this.getFilterValue({id:1,type:l._B.Filter,raw:`${this.key}:`,value:{raw:u,values:[{value:u}]}},u),i=await this.validateFilterValue(t,e.contextURLParams,e);if(i instanceof Error)"Aborted"===i.message?r[d]={...o,valid:void 0,value:o.value}:r[d]={...o,valid:!1};else{let t=this.validateValue?.(e,o,i);return t?t.value===s.rt?r[d]={...o,valid:!0,value:o.value}:r[d]={...o,valid:!0,...t,value:o.value}:r[d]={...o,valid:!1,validations:[{type:l.b.InvalidValue,message:a.D.filterInvalidValue(this.key,u)}]},o}}r[d]={...o,valid:void 0}});return await Promise.all(o),Object.values(r)}async fetchSuggestions(e,t,i){try{if(this.suggestionCache.has(e))return this.suggestionCache.get(e)??[];if(!this.suggestionEndpoint||""===this.suggestionEndpoint)throw Error("No suggestion endpoint provided");let t=new URL(this.suggestionEndpoint,window.location.origin),r=i.contextURLParams,s=new URLSearchParams([r?.toString(),this.providerContext?.toString()].join("&"));s.set("q",e),s.set("filter_value",e),t.search=s.toString();let a=await this.fetchData(t.toString());if(!a||!a.ok)return null;let l=await a.json(),n=Object.keys(l)[0],d=n?l[n]:null;if(Array.isArray(d)&&d.length<o.Rx&&this.completeResultSetQueries.add(e),!d)return null;return this.suggestionCache.set(e,d),d}catch{return null}}isCompleteResultSetQuery(e){return!!e&&-1!==Array.from(this.completeResultSetQueries).findIndex(t=>""===t?t===e:e.startsWith(t))}findPrefetchedSuggestions(e){if(!e)return[];let t=(0,r.t)({items:[...this.prefetchedSuggestions.values()],filter:e,key:e=>(0,n.I8)(e.value)??"",secondaryKey:e=>e.displayName??e.description??""}).slice(0,o.Rx);return t.push(...this.getMetaSuggestions(e)),t}async validateFilterValue(e,t,i){try{let r;if(this.validationCache.has(e))return this.validationCache.get(e)??null;if(!this.validationEndpoint||""===this.validationEndpoint)throw Error("No validation endpoint provided");let s=new URL(this.validationEndpoint,window.location.origin),a=new URLSearchParams([t?.toString(),this.providerContext?.toString()].join("&"));a.set("q",e),a.set("filter_value",e),s.search=a.toString(),this.abortPreviousValidationRequests(i);let o=await this.fetchData(s.toString(),this.abortValidationController);if(!o)return Error("Aborted");if(!o.ok)return null;let l=await o.json(),n=Object.keys(l);return r=1===n.length&&n[0]&&Array.isArray(l[n[0]])?Array.isArray(l[n[0]])?l[n[0]][0]:l[n[0]]:l,this.validationCache.set(e,r),r}catch{return null}}async fetchData(e,t){let i;try{i=await fetch(e,{method:"GET",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},signal:t?.signal})}catch(e){if("AbortError"!==e.name)throw e}return i}constructor(e,t){super(e,t),c(this,"suggestionCache",void 0),c(this,"validationCache",void 0),c(this,"prefetchedSuggestions",void 0),c(this,"completeResultSetQueries",void 0),c(this,"providerContext",void 0),c(this,"suggestionEndpoint",void 0),c(this,"validationEndpoint",void 0),c(this,"abortSuggestionsController",void 0),c(this,"abortValidationController",void 0),c(this,"valueValidator",void 0),this.suggestionEndpoint="",this.validationEndpoint="",this.suggestionCache=new Map,this.completeResultSetQueries=new Set,this.validationCache=new Map,this.abortSuggestionsController=new AbortController,this.abortValidationController=new v,this.prefetchedSuggestions=new Map}};var h=i(40811),y=i(79607),g=i(91385),f=i(73272);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let P=/(?:>|<|>=|<=)?(\d+\.\d+)/g,F=/(?:>|<|>=|<=)?(\d+)/g,S=/^(?:>|<|>=|<=)?(\d{4}-\d{1,2}-\d{1,2})?$/,w=/^(?:>|<|>=|<=)?(\d{4}-\d{1,2})?$/,b=/^(?:>|<|>=|<=)?(\d{4})?$/,V=/^(?:>|<|>=|<=)?(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z?)$/,C=/^(?:>|<|>=|<=)?(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\+\d{2}:\d{2})$/,x=/^(?:>|<|>=|<=)?(@[A-Za-z]+)([+-]\d+[mdwqy])?$/,T=[">=","<=",">","<"];let StaticFilterProvider=class StaticFilterProvider extends d.e{getfilterKeys(){return[{key:this.key,aliases:this.aliases,displayName:this.displayName,description:this.description,priority:this.priority,icon:this.icon,options:this.options}]}getSuggestions(e,t,i,r){if(!this.shouldGetSuggestions(t))return null;let s=(0,n.DS)(t,r),a=t.provider.key,o=[];if((0,n.uT)(t)&&this.options.filterTypes.valueless&&!t.raw.startsWith("-")&&o.push((0,n.jL)(this.displayName,this.icon)),(0,n.uT)(t)&&this.options.filterTypes.hasValue&&!t.raw.startsWith("-")&&o.push((0,n.Ms)(this.displayName,this.icon)),this.options.filterTypes.exclusive&&""===s&&(0,n.aK)(t)&&!t.raw.startsWith("-")){let e=(0,n.m1)(a);o.unshift(e)}let d=T.find(e=>s===e||s===`${e}@`);if(!s&&!d)return o.concat(this.filterValues);for(let e of this.filterValues){let{value:t,displayName:r}=e,a=(0,n.I8)(t),u={...e,type:l.ak.Value},c=a&&!T.find(e=>a.startsWith(e));if(this.type===l.CH.Date&&c)u.value=`${d??""}${a}`;else{let t=!!a&&(0,g.qA)(s,a),o=!!i.aliasMatching&&e.aliases&&e.aliases.some(e=>(0,g.qA)(s,e)),l=!!r&&(0,g.qA)(s,r);if(!a||!t&&!l&&!o)continue}e.priority-=(0,y.dt)(s,a),o.push(u)}return o}async validateFilterBlockValues(e,t,i,r){let s=[],o=i.map((e,i)=>{if(!this.options.filterTypes.multiValue&&(t.operator===l.tl.Between&&i>1||t.operator!==l.tl.Between&&i>0)){s[i]={...e,valid:!1,validations:[{type:l.b.MultiValueUnsupported,message:a.D.filterMultiValueFalse(this.key)}]};return}let o=(0,n.M5)(e.value);if(!o){s[i]={...e,valid:!1,validations:[{type:l.b.EmptyValue,message:a.D.filterValueEmpty(this.key)}]};return}if(t.operator===l.tl.Between&&T.some(e=>o.startsWith(e))){s[i]={...e,valid:!1,validations:[{type:l.b.InvalidValue,message:a.D.filterInvalidValue(this.key,o)}]};return}let d=!0;switch(this.type){case l.CH.Boolean:case l.CH.Select:d=void 0!==this.filterValues.find(e=>(0,n.I8)(e.value)===o||r?.aliasMatching&&e.aliases?.includes(o));break;case l.CH.Text:d=!0;break;case l.CH.DecimalNumber:{let e=o.match(P);d=(e?.length??0)>0&&e?.[0]===o;break}case l.CH.Number:{let e=o.match(F);d=(e?.length??0)>0&&e?.[0]===o;break}case l.CH.Date:if(o)if("*"===o)d=!0;else if(x.test(o)){let[,e]=x.exec(o)??[];d=void 0!==this.filterValues.find(t=>(0,n.I8)(t.value)===e)}else{let e=null;C.test(o)?e=C.exec(o)?.[1]??null:V.test(o)?e=V.exec(o)?.[1]??null:S.test(o)?e=S.exec(o)?.[1]??null:w.test(o)?e=w.exec(o)?.[1]??null:b.test(o)&&(e=b.exec(o)?.[1]??null),d=!!e&&!isNaN(Date.parse(e))}break;default:d=!0}let u=this.filterValues.find(e=>(0,n.SH)((0,n.I8)(e.value)??"",o));u?s[i]={...e,...u,valid:!0,value:e.value}:s[i]={...e,valid:d}});return await Promise.all(o),Object.values(s)}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,leadingVisual:(0,f.d)({value:e})}}constructor(e,t,i){super(e,i),m(this,"filterValues",void 0),this.filterValues=t.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}};let ArchivedFilterProvider=class ArchivedFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.archived,s.sS.archived,{...e,filterTypes:{...e?.filterTypes,multiValue:!1,valueless:!1}}),this.type=l.CH.Boolean}};let ClosedFilterProvider=class ClosedFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.closed,s.sS.closed,e),this.type=l.CH.Date}};let CommentsFilterProvider=class CommentsFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(s._i.comments,s.sS.comments,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=l.CH.Number}};let CreatedFilterProvider=class CreatedFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{valueless:!1}};super(s._i.created,s.sS.created,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=l.CH.Date}};let DraftFilterProvider=class DraftFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(s._i.draft,s.sS.draft,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=l.CH.Boolean}};let InteractionsFilterProvider=class InteractionsFilterProvider extends StaticFilterProvider{constructor(e){let t={filterTypes:{multiValue:!1,valueless:!1}};super(s._i.interactions,s.sS.interactions,{...t,...e,filterTypes:{...t.filterTypes,...e?.filterTypes}}),this.type=l.CH.Number}};let IsFilterProvider=class IsFilterProvider extends StaticFilterProvider{constructor(e,t,i=!1){let r=e?.map(e=>s.VT[e]).filter(Boolean)??[];i||(r=r.filter(e=>"blocked"!==e.value&&"blocking"!==e.value));let a={filterTypes:{valueless:!1}};super(s._i.is,r?.length>0?r:s.sS.is,{...a,...t,filterTypes:{...a.filterTypes,...t?.filterTypes}}),this.type=l.CH.Select}};let InFilterProvider=class InFilterProvider extends StaticFilterProvider{constructor(e,t){let i=e?.map(e=>s.oO[e]).filter(Boolean)??[],r={filterTypes:{valueless:!1,multiValue:!0}};super(s._i.in,i?.length>0?i:s.sS.in,{...r,...t,filterTypes:{...r.filterTypes,...t?.filterTypes}}),this.type=l.CH.Select}};let LinkedFilterProvider=class LinkedFilterProvider extends StaticFilterProvider{constructor(e,t){let i={...t,filterTypes:{...t?.filterTypes,multiValue:!1,valueless:!1}},r=e?.map(e=>s.Ez[e]).filter(Boolean)??[];super(s._i.linked,r?.length>0?r:s.sS.linked,i),this.type=l.CH.Select}};let MergedFilterProvider=class MergedFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.merged,s.sS.merged,{...e,filterTypes:{...e?.filterTypes,multiValue:!1}}),this.type=l.CH.Date}};let ReactionsFilterProvider=class ReactionsFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.reactions,s.sS.reactions,{...e,filterTypes:{multiValue:!1,valueless:!1,...e?.filterTypes}}),this.type=l.CH.Number}};let ReasonFilterProvider=class ReasonFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.reason,s.sS.reason,e),this.type=l.CH.Select}};let ReviewFilterProvider=class ReviewFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.review,s.sS.review,e),this.type=l.CH.Select}};let SortFilterProvider=class SortFilterProvider extends StaticFilterProvider{constructor(e,t){let i=[...e.map(e=>s.$c[e]).flat().filter(Boolean)??[],...e?.includes("reactions")?s.OV:[]];super(s._i.sort,i?.length>0?i:s.sS.sort,t),this.type=l.CH.Select}};let StateFilterProvider=class StateFilterProvider extends StaticFilterProvider{constructor(e="mixed",t){let i=(0,n.Lu)(e),r={filterTypes:{valueless:!1}};super(s._i.state,i,{...r,...t,filterTypes:{...r.filterTypes,...t?.filterTypes}}),m(this,"stateContext",void 0),this.stateContext=e,this.type=l.CH.Select}};let StatusFilterProvider=class StatusFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.status,s.sS.status,e),this.type=l.CH.Select}};let UpdatedFilterProvider=class UpdatedFilterProvider extends StaticFilterProvider{constructor(e){super(s._i.updated,s.sS.updated,e),this.type=l.CH.Date}};let BooleanFilterProvider=class BooleanFilterProvider extends StaticFilterProvider{constructor(e,t){super(e,h.bO,{...t,...n.Oo}),this.type=h.CH.Boolean}};i(72082);var I=i(38621);let k={Open:"open"},N={NotPlanned:"not_planned"};var _=new WeakSet;let BaseIssueFilterProvider=class BaseIssueFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,_,B).bind(this),r)}getIconData(e){return e.state===k.Open?{icon:I.IssueOpenedIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))"}:e.stateReason===N.NotPlanned?{icon:I.SkipIcon,iconColor:"var(-fgColor-muted, var(--color-neutral-emphasis))"}:{icon:I.IssueClosedIcon,iconColor:"var(--fgColor-done, var(--color-done-fg))"}}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{displayName:i.title,value:r}:!e.context.repo&&!e.context.org&&{value:s.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e,t){super(e,t),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,_),this.suggestionEndpoint="/_filter/issues",this.validationEndpoint="/_filter/issues/validate",this.type=l.CH.Select}};function B(e,t){let{title:i,titleHtml:r,nwoReference:s}=e,a=3;return t&&(i&&(a-=(0,y.dt)(t,i)),s&&(a-=(0,y.dt)(t,s))),{type:l.ak.Value,displayName:r??i,ariaLabel:`${i}, ${this.displayName}`,description:s,inlineDescription:!1,value:s??"",priority:a,...this.getIconData(e)}}let ParentIssueFilterProvider=class ParentIssueFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||s._i.parentIssue,t),this.providerContext=new URLSearchParams({parent:"true"})}};let BlockingSearchFilterProvider=class BlockingSearchFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||s._i.blocking,{filterTypes:{hasValue:!0},...t})}};let BlockedBySearchFilterProvider=class BlockedBySearchFilterProvider extends BaseIssueFilterProvider{constructor(e,t){super(e||s._i.blockedBy,{filterTypes:{hasValue:!0},...t})}};var R=i(52123);function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let KeyOnlyFilterProvider=class KeyOnlyFilterProvider{getSuggestions(){return null}validateFilterBlockValues(e,t,i){return i.map(e=>({...e,valid:!0}))}getValueRowProps(){return{text:""}}constructor(e,t){A(this,"key",void 0),A(this,"displayName",void 0),A(this,"description",void 0),A(this,"priority",void 0),A(this,"type",l.CH.Text),A(this,"icon",void 0),A(this,"options",void 0),Object.assign(this,e),this.key=e.key,this.icon=e.icon,this.displayName=e.displayName??(0,n.ZH)(e.key),this.options={...R.dQ,...t,filterTypes:{...R.dQ.filterTypes,multiValue:!1,valueless:!1,...t?.filterTypes}},this.priority=this.options.priority}};let BaseFilterProvider=class BaseFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.base,e)}};let HeadFilterProvider=class HeadFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.head,e)}};let InBodyFilterProvider=class InBodyFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.inBody,e)}};let InCommentsFilterProvider=class InCommentsFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.inComments,e)}};let InTitleFilterProvider=class InTitleFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.inTitle,e)}};let ShaFilterProvider=class ShaFilterProvider extends KeyOnlyFilterProvider{constructor(e){super(s._i.sha,e)}};let LabelFilterProvider=class LabelFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,this.processSuggestion.bind(this),r)}getIconData(e,t){return t.repo?{iconColor:e.color?.startsWith("#")?e.color:`#${e.color}`,description:e.description,inlineDescription:!1}:{icon:this.icon}}processSuggestion(e,t,i){let r=3;return t&&e.name&&(r-=(0,y.dt)(t,e.name)),{type:l.ak.Value,displayName:e.nameHtml??e.name,ariaLabel:`${e.name}, ${this.displayName}`,value:e.name??"",priority:r,...this.getIconData(e,i.context)}}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{iconColor:i.color?.startsWith("#")?i.color:`#${i.color}`,value:r,displayName:i.name,...this.getIconData(i,e.context)}:!e.context.repo&&!e.context.org&&{value:s.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon})}}constructor(e){super(s._i.label,e),this.suggestionEndpoint="/_filter/labels",this.validationEndpoint="/_filter/labels/validate",this.type=l.CH.Select}};var E=new WeakSet;let LanguageFilterProvider=class LanguageFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,E,H).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{iconColor:i.color?.startsWith("#")?i.color:`#${i.color}`,value:r,displayName:i.name}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon})??void 0}}constructor(e){super(s._i.language,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,E),this.suggestionEndpoint="/_filter/languages",this.validationEndpoint="/_filter/languages/validate",this.type=l.CH.Select}};function H(e,t){let i=3;return t&&e.name&&(i-=(0,y.dt)(t,e.name)),{type:l.ak.Value,displayName:e.name,ariaLabel:`${e.name}, ${this.displayName}`,value:e.name??"",priority:i,iconColor:e.color?.startsWith("#")?e.color:`#${e.color}`}}var $=new WeakSet;let MilestoneFilterProvider=class MilestoneFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,$,U).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{value:r,displayName:i.title,description:i.description}:!e.context.repo&&!e.context.org&&{value:s.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(s._i.milestone,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,$),this.suggestionEndpoint="/_filter/milestones",this.validationEndpoint="/_filter/milestones/validate",this.type=l.CH.Select}};function U(e,t){let{id:i,title:r,description:s}=e,a=3;return t&&r&&(a-=(0,y.dt)(t,r)),{id:i,type:l.ak.Value,displayName:r,ariaLabel:`${r}, ${this.displayName}`,value:r,description:s,inlineDescription:!1,priority:a,icon:this.icon}}function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let D={boolean:I.CheckCircleIcon,select:I.SingleSelectIcon,text:I.TypographyIcon};let NestedFilterProvider=class NestedFilterProvider{constructor(e,t){M(this,"subKeys",void 0),M(this,"filterProviders",void 0);let{subKeys:i,...r}=e;this.subKeys=i,this.filterProviders=i.map(e=>{let i={...e,type:e.type,key:`${r.key}.${e.key}`,displayName:e.displayName??e.key,description:e.description,priority:h.a6,icon:e.icon??D[e.type]};if(e.type===l.CH.Boolean)return new BooleanFilterProvider(i,t);if(e.type!==l.CH.Select)return new KeyOnlyFilterProvider(i,e.options);{let t=new StaticFilterProvider(i,e.values,{...e.options,filterTypes:{...h.dQ.filterTypes,...e.options?.filterTypes}});return t.type=i.type,t}}),this.filterProviders.push(new StaticFilterProvider({...r,key:`${r.key}.`},[],t))}};var L=i(96235),W=new WeakSet;let OrgFilterProvider=class OrgFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,W,j).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{avatar:i.avatarUrl?{url:i.avatarUrl,type:l.uW.Org}:void 0,value:r,displayName:i.name}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(s._i.org,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,W);let t=e?.businessSlug;this.suggestionEndpoint=t?(0,L.MeY)({businessSlug:t}):"/_filter/organizations",this.validationEndpoint=t?(0,L.ohj)({businessSlug:t}):"/_filter/organizations/validate",this.type=l.CH.Select}};function j(e,t){let{name:i,login:r,avatarUrl:s}=e,a=3;return t&&(i&&(a-=(0,y.dt)(t,i)),r&&(a-=(0,y.dt)(t,r))),{type:l.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:(0,n.$4)(r)??"",description:r,inlineDescription:!0,priority:a,icon:s?void 0:this.icon,avatar:s?{url:s,type:l.uW.Org}:void 0}}var O=new WeakSet;let ProjectFilterProvider=class ProjectFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,O,q).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{displayName:i.title,value:r}:!e.context.repo&&!e.context.org&&{value:s.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block"}}constructor(e){super(s._i.project,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,O),this.suggestionEndpoint="/_filter/projects",this.validationEndpoint="/_filter/projects/validate",this.type=l.CH.Select}};function q(e,t){let{title:i,value:r}=e,s=3;return t&&(i&&(s-=(0,y.dt)(t,i)),r&&(s-=(0,y.dt)(t,r))),{type:l.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:(0,n.$4)(r)??"",description:r,inlineDescription:!1,priority:s}}var K=new WeakSet;let RepositoryFilterProvider=class RepositoryFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,K,z).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!i&&!!r&&{displayName:i.name,value:r}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"block",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon,squareIcon:!0})}}constructor(e){super(s._i.repo,e),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,K),this.suggestionEndpoint="/_filter/repositories",this.validationEndpoint="/_filter/repositories/validate",this.type=l.CH.Select}};function z(e,t){let{nameWithOwner:i}=e,r=3;return t&&i&&(r-=(0,y.dt)(t,i)),{type:l.ak.Value,displayName:i,ariaLabel:`${i}, ${this.displayName}`,value:i,inlineDescription:!1,priority:r,icon:this.icon}}var Q=new WeakSet;let BaseTeamFilterProvider=class BaseTeamFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){return this.processSuggestions(e,t,(function(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i})(this,Q,G).bind(this),r)}validateValue(e,t,i){let r=(0,n.M5)(t.value);return!!r&&(i?{avatar:i.avatarUrl?{url:i.avatarUrl,type:l.uW.Team}:void 0,value:r,displayName:i.name}:!e.context.repo&&!e.context.org&&{value:s.rt})}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"inline",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon})}}constructor(e,t,i){super(e,i),function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,Q),this.suggestionEndpoint="/_filter/teams",this.validationEndpoint="/_filter/teams/validate",this.type=l.CH.Select}};function G(e,t){let{name:i,combinedSlug:r,avatarUrl:s}=e,a=3;return t&&(i&&(a-=(0,y.dt)(t,i)),r&&(a-=(0,y.dt)(t,r))),{type:l.ak.Value,displayName:i,value:(0,n.$4)(r)??"",ariaLabel:`${i}, ${this.displayName}`,description:r,inlineDescription:!0,priority:a,icon:s?void 0:this.icon,avatar:s?{url:s,type:l.uW.Team}:void 0}}let TeamFilterProvider=class TeamFilterProvider extends BaseTeamFilterProvider{constructor(e,t){super(s._i.team,e,t)}};let TeamReviewRequestedFilterProvider=class TeamReviewRequestedFilterProvider extends BaseTeamFilterProvider{constructor(e,t){super(s._i.teamReviewRequested,e,t)}};function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let X="@copilot",Y={type:l.ak.Value,value:"@me",ariaLabel:"@me, Signed-in user",displayName:"Me",description:"Signed-in user",inlineDescription:!0,priority:1,icon:I.ArrowSwitchIcon,iconColor:"var(--fgColor-done, var(--color-done-fg))"},J=e=>({type:l.ak.Value,value:"*",displayName:`Has ${e.toLocaleLowerCase()}`,ariaLabel:`Has ${e}, ${e}`,priority:1,icon:I.PlusCircleIcon});let BaseUserFilterProvider=class BaseUserFilterProvider extends AsyncFilterProvider{async getSuggestions(e,t,i,r){this.includeBots&&e.addQueryParam("include_bots","1");let s=await this.processSuggestions(e,t,this.processSuggestion.bind(this),r)??[],a=(0,n.DS)(t,r),o=+(s[0]?.type===l.ak.NoValue);if(this.showAtMe&&(""===a||(0,g.qA)(a,"@me"))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>"@me"===e.value)<0&&(s.splice(o,0,Y),o++),(""===a||(0,g.qA)(a,X))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>e.value===X)<0){let e=s.findIndex(e=>e.value===X);if(e>-1){let t=s.splice(e,1);this.showAtCopilot&&(s.splice(o,0,t[0]),o++)}}return this.showHasValue&&(""===a||(0,g.qA)(a,"*"))&&(0,n.aK)(t)&&t.value?.values.findIndex(e=>"*"===e.value)<0&&s.splice(o,0,J(this.displayName)),s}processSuggestion(e,t){let{login:i,name:r,avatarUrl:s}=e,a=3;if(t){if(i){let e=(0,y.dt)(t,i);a-=(e!==y.IP?e:1)*.75}if(r){let e=(0,y.dt)(t,r);a-=(e!==y.IP?e:1)*.25}}return"@me"===i&&(a=1),{type:l.ak.Value,value:i,ariaLabel:`${i}, ${r}, ${this.displayName}`,description:r,inlineDescription:!0,priority:a,icon:s?void 0:this.icon,avatar:s?{url:s,type:l.uW.User}:void 0}}getMetaSuggestions(e){let t=[];return this.showAtMe&&"@me".startsWith(e)&&t.push(Y),this.showHasValue&&"*".startsWith(e)&&t.push(J(this.displayName)),t}validateValue(e,t,i){let r=(0,n.M5)(t.value);return"@me"===r?{avatar:this.currentUserAvatarUrl?{url:this.currentUserAvatarUrl,type:l.uW.User}:void 0,value:r}:this.showHasValue&&"*"===r||i&&this.showAtCopilot&&r===X?{avatar:void 0,value:r}:i&&r?{avatar:i.avatarUrl?{url:i.avatarUrl,type:l.uW.User}:void 0,value:r,displayName:i.name}:!e.context.repo&&!e.context.org&&{value:s.rt}}getValueRowProps(e){return{text:e.displayName??(0,n.I8)(e.value)??"",description:e.description,descriptionVariant:"inline",leadingVisual:(0,f.d)({value:e,providerIcon:this.icon})}}constructor(e,t,i){super(t,i),Z(this,"showAtMe",void 0),Z(this,"showAtCopilot",void 0),Z(this,"showHasValue",void 0),Z(this,"currentUserLogin",void 0),Z(this,"currentUserAvatarUrl",void 0),Z(this,"includeBots",void 0),this.suggestionEndpoint="/_filter/users",this.validationEndpoint="/_filter/users/validate",this.currentUserLogin=e.currentUserLogin,this.currentUserAvatarUrl=e.currentUserAvatarUrl,this.includeBots=e.includeBots??!1,this.type=l.CH.User,this.showAtMe=e?.showAtMe??!0,this.showHasValue=e?.showHasValue??!1,this.showAtCopilot=e?.showAtCopilot??!1}};let AssigneeFilterProvider=class AssigneeFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.assignee,t)}};let AuthorFilterProvider=class AuthorFilterProvider extends BaseUserFilterProvider{constructor(e,t){let i={filterTypes:{multiValue:!1,valueless:!1}};super({...e,includeBots:!0},s.yV.author,{...i,...t,filterTypes:{...i.filterTypes,...t?.filterTypes}})}};let CommenterFilterProvider=class CommenterFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.commenter,t)}};let InvolvesFilterProvider=class InvolvesFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.involves,t)}};let MentionsFilterProvider=class MentionsFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.mentions,t)}};let ReviewedByFilterProvider=class ReviewedByFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.reviewedBy,t)}};let ReviewRequestedFilterProvider=class ReviewRequestedFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.reviewRequested,t)}};let UserFilterProvider=class UserFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.user,t)}};let UserReviewRequestedFilterProvider=class UserReviewRequestedFilterProvider extends BaseUserFilterProvider{constructor(e,t){super(e,s.yV.userReviewRequested,t)}}},61407:(e,t,i)=>{i.d(t,{t:()=>s});var r=i(79607);let s=({items:e,filter:t,key:i,secondaryKey:s})=>{let a=e.map(e=>[(0,r.dt)(t,i(e)),e]);return s&&(a=a.map(([e,i])=>[Math.max(e,(0,r.dt)(t,s(i))),i])),a.filter(([e])=>e>r.IP).sort(([e,t],[r,s])=>r===e?i(t).localeCompare(i(s)):r-e).map(([,e])=>e)}}}]);
//# sourceMappingURL=ui_packages_filter_providers_index_ts-b4db4f9e05f0.js.map