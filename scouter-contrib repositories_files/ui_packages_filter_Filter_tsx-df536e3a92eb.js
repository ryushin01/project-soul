"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_filter_Filter_tsx"],{18991:(e,t,l)=>{l.d(t,{D:()=>i});var a=l(491);let i={filterInvalid:e=>`Filter contains ${e} issue${1===e?"":"s"}:`,filterBlockInvalid:e=>`${e} is invalid`,filterProviderNotSupported:e=>`Filter '${e}' not supported`,filterProviderDeprecated:e=>`Filter '${e}' is deprecated and will be removed in the future`,filterValueEmpty:e=>`Empty value for <pre>${e}</pre>`,filterMultiValueFalse:e=>`Only one value allowed for <pre>${e}</pre>`,filterInvalidValue:(e,t)=>`Invalid value <pre>${t}</pre> for <pre>${e}</pre>`,filterProviderTopLevel:e=>`Filter <pre>${e}</pre> cannot be used within groups`,unbalancedQuotations:"Unbalanced quotation marks",unbalancedParentheses:"Unbalanced parentheses",maxNestedGroups:`Maximum nested groups of ${a.mn} exceeded`,advancedFilterDialogCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},exclude:"Exclude",dividerValue:"%%DIVIDER%%"}},82759:(e,t,l)=>{l.d(t,{Ge:()=>i.Ge,Pt:()=>s.Pt,U2:()=>r.U2,g0:()=>a.g0});var a=l(92641),i=l(75797),r=l(16099),s=l(55581)},44308:(e,t,l)=>{l.d(t,{N:()=>FilterQuery});var a=l(79607),i=l(91385),r=l(52123),s=l(491),n=l(18991),o=l(90678),u=l(71073);function d(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,l){if(!t.has(e))throw TypeError("attempted to "+l+" private field on non-instance");return t.get(e)}function p(e,t){var l=c(e,t,"get");return l.get?l.get.call(e):l.value}function v(e,t,l){d(e,t),t.set(e,l)}function m(e,t,l){var a=c(e,t,"set");if(a.set)a.set.call(e,l);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=l}return l}function h(e,t,l){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return l}function f(e,t){d(e,t),t.add(e)}function _(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var g=new WeakMap,x=new WeakMap,y=new WeakMap,B=new WeakMap,k=new WeakMap,b=new WeakMap,N=new WeakMap,w=new WeakSet,j=new WeakSet;let FilterQuery=class FilterQuery{get activeBlock(){return p(this,g)}get activeBlockId(){return p(this,g)?.id??-1}get blocks(){return p(this,x)}clearActiveBlock(){m(this,g,void 0)}get context(){let e={...p(this,y)??{},...p(this,B)??{}};if(!p(this,y)?.repo){let t=p(this,x).filter(e=>(0,u.aK)(e)&&"repo"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,u.M5)(e.value)??"":"")).flat();if(t.length>0&&(e.repo=t.join(",")),!p(this,y)?.org){let t=p(this,x).filter(e=>(0,u.aK)(e)&&"org"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,u.M5)(e.value)??"":"")).flat();t.length>0&&(e.org=t.join(","))}}return e}get contextURLParams(){return new URLSearchParams(this.context)}get errors(){return p(this,k)?Array.from(p(this,k)):[]}getErrors(e=!1){return e?[...p(this,k),...p(this,b)]:p(this,k)}get filterCount(){if(!this.isValidated||!(0,u.Ed)(this))return this.cachedFilterCount;let e=this.blocks.filter(e=>(0,u.aK)(e)&&e.value.values.some(e=>e.valid)).length;return this.cachedFilterCount=e,e}get filtersUsed(){if(!(0,u.Ed)(this))return this.cachedFiltersUsed;let e=(0,u.wR)(this.blocks).filter(e=>(0,u.aK)(e)).map(e=>e.provider?.key);return this.cachedFiltersUsed=e,e}get instanceContext(){return{cachedFilterCount:this.cachedFilterCount,cachedFiltersUsed:this.cachedFiltersUsed,cachedNestedGroupCount:this.cachedNestedGroupCount,staticContext:p(this,y)}}get nestedGroupCount(){if(!(0,u.Ed)(this))return this.cachedNestedGroupCount;let e=(0,u.wR)(this.blocks).filter(e=>(0,u.W9)(e)).reduce((e,t)=>Math.max(e,t.groupDepth||0),0);return this.cachedNestedGroupCount=e,e}get raw(){return p(this,N)}get staticContext(){return p(this,y)}set staticContext(e){m(this,y,e)}set additionalParams(e){m(this,B,e)}addQueryParam(e,t){p(this,B)||m(this,B,{}),p(this,B)[e]=t}async getSuggestions(e,t,l){let r=this.activeBlock,d=[];if(!r&&""===this.raw||r?.type===o._B.Space||r?.type===o._B.UnmatchedOpenParen||r?.type===o._B.Group&&(r?.raw.endsWith("(")||r?.raw==="()")){d=[{id:"providers-suggestion-group",suggestions:Object.values(t).filter(e=>h(this,w,$).call(this,e)&&e.options.support.status===o.b9.Supported).filter(e=>e.priority<=s.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:o.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:e.key}))}];let e=[];l.groupAndKeywordSupport&&(e.push((0,u.PU)()),e.push((0,u.j1)())),Object.values(t).filter(e=>!0===e.options.filterTypes.exclusive&&h(this,w,$).call(this,e)).length>0&&e.push((0,u.m1)()),d.push({id:"utility-suggestion-group",suggestions:e})}else if(r?.type===o._B.Text&&"-"===r.raw){let e=Object.values(t).filter(e=>e.options.filterTypes.exclusive&&h(this,w,$).call(this,e)&&e.options.support.status===o.b9.Supported).filter(e=>e.priority<=s.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:o.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:`-${e.key}`}));d=[{id:"exclude-providers",title:n.D.exclude,suggestions:e}]}else if(r?.type===o._B.Text){let i=[],s=(0,u.ON)(r)?r:null,n=s&&e-s.startIndex<=s.raw.indexOf(l.filterDelimiter)?s.raw.substring(0,e-s.startIndex):r.raw;Object.values(t).map(e=>{if(((0,u.kZ)(e,n,!0)||e.displayName&&e.displayName.startsWith(n))&&h(this,w,$).call(this,e)&&e.options.support.status===o.b9.Supported){let t=e.key;t===n&&t.endsWith(".")||(r.raw.startsWith("-")&&e.options.filterTypes.exclusive&&(t=`-${e.key}`),i.push({type:o.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority-(0,a.dt)(n,e.key),icon:e.icon,value:t}))}}),i.sort((e,t)=>e.priority-t.priority),d=[{id:"providers-suggestion-group",suggestions:i}];let c=[];l.groupAndKeywordSupport&&("and".startsWith(n.toLocaleLowerCase())&&c.push((0,u.PU)()),"or".startsWith(n.toLocaleLowerCase())&&c.push((0,u.j1)())),d.push({id:"utility-suggestion-group",suggestions:c})}else if((0,u.aK)(r)){let s=[],n=(0,u.Xz)(r.key.value);if((0,u.v7)(r)){let[c,p]=(0,u.t4)(r,e);if("key"===c){let e=[];Object.values(t).map(t=>{((0,i.qA)(p.value,t.key)||t.options.filterTypes.exclusive&&(0,i.qA)(p.value,`-${t.key}`))&&h(this,w,$).call(this,t)&&e.push({type:o.ak.Key,displayName:t.displayName,ariaLabel:`${t.displayName}, Filter${t.description?`, ${t.description}`:""}`,priority:t.priority-(0,a.dt)(p.value,t.key),icon:t.icon,value:t.key})}),e.sort((e,t)=>e.priority-t.priority),d=[{id:"providers-suggestion-group",suggestions:e}]}else if("value"===c){let a=Object.values(t).find(e=>(0,u.kZ)(e,n)),i=await a?.getSuggestions(this,r,l,e);s=i?.filter(e=>0>r.value.values.findIndex(t=>(0,u.M5)(t.value)===e.value&&!t.hasCaret)).sort((e,t)=>e.priority-t.priority)??[]}}d=[{id:"values-suggestion-group",suggestions:s}]}return d}constructor(e="",t=[],l,a,i,s=!1){f(this,w),f(this,j),_(this,"cachedFilterCount",0),_(this,"cachedFiltersUsed",[]),_(this,"cachedNestedGroupCount",0),_(this,"config",void 0),_(this,"isValidated",!1),v(this,g,{writable:!0,value:void 0}),v(this,x,{writable:!0,value:void 0}),v(this,y,{writable:!0,value:{}}),v(this,B,{writable:!0,value:{}}),v(this,k,{writable:!0,value:[]}),v(this,b,{writable:!0,value:[]}),v(this,N,{writable:!0,value:void 0}),m(this,x,t),m(this,N,e),m(this,g,a),this.isValidated=s,i&&(m(this,y,i.staticContext),this.cachedFilterCount=i.cachedFilterCount??0,this.cachedFiltersUsed=i.cachedFiltersUsed??[],this.cachedNestedGroupCount=i.cachedNestedGroupCount??0),this.config=l??r.a7,h(this,j,I).call(this,t)}};function $(e){return e.options.filterTypes?.multiKey!==!1||this.blocks.filter(t=>(0,u.aK)(t)&&t.key.value===e.key).length<1}function I(e){let t=new Set,l=new Set,a=e=>{for(let i of e)if((0,u.W9)(i)){if(!i.valid)for(let e of i.validations??[])e.message&&t.add(e.message);a(i.blocks)}else if((0,u.aK)(i)&&!1===i.valid&&this.activeBlockId!==i.id){if(i.validationMessage&&t.add(i.validationMessage??""),!i.key.valid)for(let e of i.key.validations??[])e.message&&t.add(e.message);for(let e of i.value.values)if(!1===e.valid)if(e.validations)for(let l of e.validations??[])l.message&&t.add(l.message);else t.add(n.D.filterInvalidValue(i.key.value,(0,u.q5)((0,u.I8)(e.value))??""))}else if(((0,u.oE)(i)||(0,u.iy)(i))&&i.validations)l.add(n.D.unbalancedParentheses);else if((0,u.ON)(i))for(let e of i.validations??[])e.message&&l.add(e.message)};(p(this,N).match(/"/g)??[]).length%2!=0&&l.add(n.D.unbalancedQuotations),a(e),m(this,k,Array.from(t)),m(this,b,Array.from(l))}},96276:(e,t,l)=>{l.d(t,{i:()=>FilterQueryParser});var a=l(46632),i=l(52123),r=l(491),s=l(18991),n=l(44308),o=l(90678),u=l(71073);let d=(0,a.A)((e,t)=>RegExp(`([\\s${e}"]*?)((?:>|<|>=|<=)*[\\w\\d\\-_"'?/\\.=+!@#$%^&*`+(t?");:\\p{Extended_Pictographic}]*)$":"();:\\p{Extended_Pictographic}]*)$"),"gu"));function c(e,t,l){if(!t.has(e))throw TypeError("attempted to "+l+" private field on non-instance");return t.get(e)}function p(e,t){var l=c(e,t,"get");return l.get?l.get.call(e):l.value}function v(e,t,l){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,l)}function m(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}let h=(0,a.A)((e,t)=>RegExp(`[\\s${e}${t?")":""}](?=(?:[^"]*"[^"]*")*[^"]*$)`,"g")),f=(0,a.A)(e=>RegExp(`${e}(?=(?:[^"]*"[^"]*")*[^"]*$)`,"g"));var _=new WeakMap,g=new WeakMap;let FilterQueryParser=class FilterQueryParser{parse(e,t=new n.N("",[],this.config),l=-1){let a,i=function(e,t,l=-1){let{matchedParens:a,unmatchedOpenParens:i,unmatchedCloseParens:n}=function(e){let t=[],l=[],a=!1,i=new Set,r=new Set;for(let i=0;i<e.length;i++)'"'===e[i]&&(a=!a),"("!==e[i]||a?")"===e[i]&&!a&&t.length>0?l.push([t.pop(),i]):")"!==e[i]||a||r.add(i):t.push(i);let s=new Map;for(let[e,t]of l)s.set(e,t);for(let e of t)i.add(e);return{matchedParens:s,unmatchedOpenParens:i,unmatchedCloseParens:r}}(e),d=0,c=0,p=0;return function v(m=e.length){let h=[],f=e.substring(0,m);for(;d<m;)if(t&&void 0!==a.get(d)){let t=d,i=a.get(d);d+=1;let n=(p+=1)>r.mn;h.push({id:c,type:o._B.Group,raw:e.substring(t,i+1),blocks:v(i),groupDepth:p,startIndex:t,endIndex:i,hasCaret:(0,u.dV)(l,t,i),valid:!n,validations:n?[{type:o.b.MaxNestedGroups,message:s.D.maxNestedGroups}]:[]}),p-=1,d=i+1}else if(t&&"("===f[d])h.push({id:c,type:o._B.UnmatchedOpenParen,raw:"(",startIndex:d,endIndex:d+1,hasCaret:(0,u.dV)(l,d+1,d+1),valid:!1,validations:[{type:o.b.UnbalancedParentheses,message:s.D.unbalancedParentheses}]}),c+=1,d+=1;else if(t&&")"===f[d])h.push({id:c,type:o._B.UnmatchedCloseParen,raw:")",startIndex:d,endIndex:d+1,hasCaret:(0,u.dV)(l,d+1,d+1),valid:!1,validations:[{type:o.b.UnbalancedParentheses,message:s.D.unbalancedParentheses}]}),c+=1,d+=1;else if(f[d]?.search(/\s/)===0){let e=f[d]??"";for(let t=d+1;t<m;t++)if(f[t]?.search(/\s/)===0)e+=f[t]??"";else break;h.push({id:c,type:o._B.Space,raw:e,startIndex:d,endIndex:d+e?.length,hasCaret:(0,u.dV)(l,d+1,d+e?.length)}),c+=1,d+=e?.length}else{let e,a=function(e,t,l){let a=0,i=null;do{let r=i?i+1:t,s=l?e.slice(r).search(/\s|\(|\)/):e.slice(r).search(/\s/);i=-1===s?-1:r+s,a=0;for(let t=0;t<i;t++)'"'===e[t]&&(a+=1)}while(a%2==1)return i}(f,d,t);a>-1&&(e=a>-1&&f[a]?.match(/\s/)?a+1:a);let r=f.substring(d,e).trimEnd();h.push({id:c,type:o._B.Text,raw:r,startIndex:d,endIndex:d+r.length,hasCaret:(0,u.dV)(l,d,d+r.length),valid:0===i.size&&0===n.size,validations:[]}),c+=1,d+=r.length}return h}()}(e,this.config.groupAndKeywordSupport??!1,l),d=e=>{for(let[t,i]of e.entries())if(i.type!==o._B.Space&&i.type!==o._B.UnmatchedOpenParen&&i.type!==o._B.UnmatchedCloseParen)if(this.config.groupAndKeywordSupport&&(0,u.W9)(i))i.blocks=d(i.blocks),!i.blocks.length&&i.hasCaret&&(a=i);else{let s=i;if(this.config.groupAndKeywordSupport&&r.d6.includes(s.raw))s.type=o._B.Keyword;else{let a=s.raw,i=a.indexOf(this.config.filterDelimiter),r=a.substring(0,i),n=this.filterProviders.find(e=>(0,u.kZ)(e,r));n&&(s=this.processFilterBlock(s,n,i,l),e[t]=s)}s.hasCaret&&(a=s)}else i.type===o._B.Space&&i.hasCaret||i.type===o._B.UnmatchedOpenParen&&i.hasCaret?a=i:i.type===o._B.UnmatchedCloseParen&&i.hasCaret&&(a=i);return e};return i=d(i),new n.N(e,i,this.config,a,t.instanceContext)}replaceActiveBlockWithPresenceBlock(e,t){let l,a=0,i=e.activeBlock;if(!(i&&(0,u.v7)(i)))return[e.raw,e.raw.length];{let r=e.raw.substring(0,i.startIndex),s=e.raw.substring(i.endIndex);return a=(l=`${r}${t}${this.config.filterDelimiter}${i.key.value}`).length,[l+=s&&s[0]?.search(/\s/)!==0?` ${s}`:s,a]}}insertSuggestion(e,t,l){let a,i=0,r=e.activeBlock;if(r&&(0,u.v7)(r)){let s=e.raw.substring(0,r.startIndex),n=e.raw.substring(r.endIndex),o=[],d=r.key.value;if(t.startsWith("-"))d=t,i=(a=`${s}${d}${this.config.filterDelimiter}`).length;else{for(let e of r.value.values)(0,u.dV)(l,e.startIndex,e.endIndex)?(i=e.startIndex+t.length,o.push(t)):o.push((0,u.I8)(e.value)??"");a=`${s}${d}${this.config.filterDelimiter}${o.join(this.config.valueDelimiter)}`}a+=n}else if(r&&(0,u.ON)(r)&&l-r.startIndex<=r.raw.indexOf(this.config.filterDelimiter)){let l=e.raw.substring(0,r.startIndex),s=e.raw.substring(r.endIndex),n=r.raw.indexOf(this.config.filterDelimiter),o=r.raw.substring(n+1);a=`${l}${t}${o}${s}`,i=l.length+t.length}else if(l>=0){let r=e.raw.substring(0,l),s=e.raw.substring(l);this.NEXT_DELIMITER_REGEX.lastIndex=0;let n=this.NEXT_DELIMITER_REGEX.exec(s);s=n?s.substring(n.index):"",a=(r=r.replace(this.LAST_DELIMITER_REGEX,"$1")+t)+s,i=r.length}else i=(a=e.raw+t).length;return[a,i]}getRaw(e){let t="";for(let l of e.blocks)(0,u.aK)(l)?(t+=l.key.value,t+=l.value.raw?`${e.config.filterDelimiter}${l.value.raw}`:""):t+=l.raw;return t}validateFilterProvider(e,t=!1){return e.options.support.status===o.b9.Unsupported?[!1,{type:o.b.FilterProviderUnsupported,message:e.options.support.message??s.D.filterProviderNotSupported(e.key)}]:e.options.support.status===o.b9.Deprecated?[!1,{type:o.b.FilterProviderDeprecated,message:e.options.support.message??s.D.filterProviderDeprecated(e.key)}]:!t&&r.jb.includes(e.key)?[!1,{type:o.b.FilterProviderTopLevel,message:s.D.filterProviderTopLevel(e.key)}]:[!0,void 0]}processFilterBlock(e,t,l,a){let i=e.startIndex,r=e.raw.substring(0,l),s=e.raw.substring(l+1),n=(0,u.zB)(t,r,s)??o.tl.Is,d=i+l+1,c=s.split(this.ITEMS_REGEX);if(n===o.tl.Between){let e=[];c.map(t=>{let l=t.split("..").filter(e=>e);l.length<2&&(t.startsWith("..")?l=["",...l]:l.push("")),e=[...e,...l]}),c=e}let v=c.map(e=>{let l={startIndex:d,endIndex:d+e.length,hasCaret:(0,u.dV)(a,d,d+e.length),value:e,valid:!!p(this,g).has(`${r}${this.config.filterDelimiter}${(0,u.I8)(e)}`)||void 0};t.filterValues&&void 0===l.valid&&t.filterValues?.find(t=>!!((0,u.I8)(t.value)===e||t.aliases?.includes(e))&&(l.valid=!0,!0));let i=n===o.tl.Between?2:1;return d=d+e.length+i,l});return{...e,type:o._B.Filter,provider:t,operator:n,valid:!!p(this,g).has(e.raw)||void 0,key:{startIndex:i,endIndex:i+l,hasCaret:(0,u.dV)(a,i,i+l),value:r},value:{startIndex:i+l+1,endIndex:i+e.raw.length,hasCaret:(0,u.dV)(a,i+l+1,i+e.raw.length),values:v,raw:s}}}async validateQueryBlock(e,t,l=!1){if((0,u.v7)(e)){let[a,i]=this.validateFilterProvider(e.provider,l),r=await e.provider.validateFilterBlockValues?.(t,e,e.value.values,this.config);r.map(t=>{t.valid&&p(this,g).add(`${e.provider.key}${this.config.filterDelimiter}${(0,u.I8)(t.value)}`)});let s=r.every(e=>e.valid)&&a;return s&&p(this,g).add(e.raw),{...e,valid:s,key:{...e.key,valid:a,validations:i?[i]:void 0},value:{...e.value,values:r}}}return e}async validateGroupBlock(e,t){let l=await Promise.all(e.blocks.map(e=>(0,u.W9)(e)?this.validateGroupBlock(e,t):this.validateQueryBlock(e,t)));return{...e,blocks:l}}async validateFilterQuery(e){let t=[];e.blocks.map(l=>{(0,u.W9)(l)?t.push(this.validateGroupBlock(l,e)):(0,u.h8)(l)&&t.push(this.validateQueryBlock(l,e,!0))});let l=await Promise.all(t);return!p(this,_)[e.raw]&&(0,u.Ed)(e)&&(p(this,_)[e.raw]=e),new n.N(e.raw,l,this.config,e.activeBlock,e.instanceContext,!0)}constructor(e=[],t){m(this,"filterProviders",[]),m(this,"config",void 0),v(this,_,{writable:!0,value:{}}),v(this,g,{writable:!0,value:void 0}),m(this,"NEXT_DELIMITER_REGEX",void 0),m(this,"ITEMS_REGEX",void 0),m(this,"LAST_DELIMITER_REGEX",void 0),this.filterProviders=e,this.config=t??i.a7,function(e,t,l){var a=c(e,t,"set");if(a.set)a.set.call(e,l);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=l}}(this,g,new Set),this.NEXT_DELIMITER_REGEX=h(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1),this.ITEMS_REGEX=f(this.config.valueDelimiter),this.LAST_DELIMITER_REGEX=d(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1)}}},72082:(e,t,l)=>{l.d(t,{M:()=>HasFilterProvider});var a=l(90678),i=l(14653);let HasFilterProvider=class HasFilterProvider extends i.Q{constructor(e,t){super(e,a.ak.HasValue,t)}}},62884:(e,t,l)=>{l.d(t,{A:()=>ValueValidator,e:()=>RootFilterProvider});var a=l(52123),i=l(90678),r=l(71073);function s(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}let RootFilterProvider=class RootFilterProvider{shouldGetSuggestions(e){return e&&e.type!==i._B.Space&&(0,r.Bt)(e,this.options.filterTypes.multiValue)}constructor(e,t){s(this,"key",void 0),s(this,"aliases",void 0),s(this,"displayName",void 0),s(this,"description",void 0),s(this,"priority",void 0),s(this,"type",void 0),s(this,"icon",void 0),s(this,"options",void 0),Object.assign(this,e),this.key=e.key,this.icon=e.icon,this.type=i.CH.Text,this.displayName=e.displayName??(0,r.ZH)(e.key),this.options={...a.dQ,priority:e.priority,...t,filterTypes:{...a.dQ.filterTypes,...t?.filterTypes}},this.priority=this.options.priority}};let ValueValidator=class ValueValidator extends RootFilterProvider{validateValue(e,t,l){return!!l&&l}}},14653:(e,t,l)=>{l.d(t,{Q:()=>ValuePresenceFilterProvider});var a=l(79607),i=l(91385),r=l(52123),s=l(491),n=l(90678),o=l(71073),u=l(73272),d=l(62884);let c={[n.ak.HasValue]:s._i.has,[n.ak.NoValue]:s._i.no};let ValuePresenceFilterProvider=class ValuePresenceFilterProvider extends d.e{getSuggestions(e,t,l,r){if(!this.shouldGetSuggestions(t))return null;let s=(0,o.DS)(t,r),u=[];if(!s)return this.filterValues.filter(t=>(0,o.Di)(e,this.key,(0,o.M5)(t.value)).length<1);for(let t of this.filterValues){let{value:l,displayName:r}=t,d=(0,o.I8)(l),c=!!d&&(0,i.qA)(s,d),p=!!r&&(0,i.qA)(s,r);!((0,o.Di)(e,this.key,(0,o.M5)(d)).length>0)&&d&&(c||p)&&(t.priority-=(0,a.dt)(s,d),u.push({...t,type:n.ak.Value}))}return u}validateFilterBlockValues(e,t,l){return l.map((a,i)=>{let r=(0,o.I8)(a.value),s=(0,o.Di)(e,this.key,(0,o.M5)(r)).sort((e,t)=>e.id-t.id),n=!!r&&!!this.filterValues.find(e=>(0,o.SH)((0,o.I8)(e.value)??"",r));return s[0]?.id!==void 0&&(t.id!==s[0].id||l.findIndex(e=>e.value===r)<i)&&(n=!1),{...a,valid:n}})}getValueRowProps(e){return{text:e.displayName??(0,o.I8)(e.value)??"",leadingVisual:(0,u.d)({value:e})}}constructor(e,t,l){super(c[t],l),function(e,t,l){t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l}(this,"filterValues",void 0),this.options={...r.dQ,...l,filterTypes:{...r.dQ.filterTypes,valueless:!1,...l?.filterTypes}},this.type=n.CH.Select,this.filterValues=e.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}}},40811:(e,t,l)=>{l.d(t,{uW:()=>x.uW,_B:()=>x._B,_i:()=>ed._i,$D:()=>ed.$D,dJ:()=>ez,tl:()=>x.tl,CH:()=>x.CH,n5:()=>eQ,ak:()=>x.ak,a6:()=>ed.a6,b9:()=>x.b9,FT:()=>x.FT,bO:()=>ed.bO,yV:()=>ed.yV,Xl:()=>eG,b:()=>x.b,dQ:()=>ed.dQ});var a=l(74848),i=l(26033),r=l(98386),s=l(27389),n=l(34164),o=l(96540),u=l(27851),d=l(75367),c=l(38621),p=l(53526),v=l(55847),m=l(9852),h=l(46632),f=l(18991),_=l(82759),g=l(39632),x=l(90678),y=l(71073),B=l(10569),k=l(15385);let b={Octicon_0:"AddFilterButton-module__Octicon_0--kSneW",ActionMenu_Overlay_0:"AddFilterButton-module__ActionMenu_Overlay_0--qJJZN",ActionList_0:"AddFilterButton-module__ActionList_0--JmaUA",ActionList_Item_0:"AddFilterButton-module__ActionList_Item_0--HDBEv"},N=(0,o.forwardRef)(({size:e,filterProviders:t,addNewFilterBlock:l},i)=>{let[s,n]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Q,{size:e,ref:i,onClick:()=>n(!s),...(0,r.G)("afd-add-filter"),children:[(0,a.jsx)(c.PlusIcon,{className:b.Octicon_0}),"Add a filter"]}),(0,a.jsx)(B.W,{anchorRef:i,open:s,onOpenChange:n,children:(0,a.jsx)(B.W.Overlay,{className:b.ActionMenu_Overlay_0,children:(0,a.jsx)(k.l,{...(0,r.G)("afd-add-filter-options"),className:b.ActionList_0,children:t.map(e=>{let{icon:t}=e;return(0,a.jsxs)(k.l.Item,{onSelect:()=>l(e),role:"menuitem",className:b.ActionList_Item_0,children:[t&&(0,a.jsx)(k.l.LeadingVisual,{children:(0,a.jsx)(t,{})}),e.displayName??e.key]},`advanced-filter-add-provider-${e.key}`)})})})})]})});N.displayName="AddFilterButton";let w={Box_0:"AdvancedFilterDialog-module__Box_0--VpPcN",Box_1:"AdvancedFilterDialog-module__Box_1--kqOOK",Box_2:"AdvancedFilterDialog-module__Box_2--jbFK3",Box_3:"AdvancedFilterDialog-module__Box_3--w5Amr",Box_4:"AdvancedFilterDialog-module__Box_4--YFH2n",nonEmpty:"AdvancedFilterDialog-module__nonEmpty--yIJ8S",Button_0:"AdvancedFilterDialog-module__Button_0--vFOss",standaloneButton:"AdvancedFilterDialog-module__standaloneButton--qoffh"},j={Box_0:"BlankState-module__Box_0--AmMgB",Box_1:"BlankState-module__Box_1--AjzUe",Box_2:"BlankState-module__Box_2--jdCHM",Box_3:"BlankState-module__Box_3--cn1nb"},$=({isNarrowBreakpoint:e,addFilterButtonMobileRef:t,filterProviders:l,addNewFilterBlock:i})=>(0,a.jsxs)("div",{className:j.Box_0,...(0,r.G)("afd-no-content"),children:[(0,a.jsx)("div",{className:j.Box_1,children:"Build complex filter queries"}),(0,a.jsx)("div",{className:j.Box_2,children:"To start building your query add your first filter using the button below."}),(0,a.jsx)("div",{className:j.Box_3,children:(0,a.jsx)(N,{size:e?"medium":"small",ref:t,filterProviders:l,addNewFilterBlock:i})})]});try{$.displayName||($.displayName="BlankState")}catch{}var I=l(91385),C=l(491);let S={Box_0:"AdvancedFilterItem-module__Box_0--G8DZm",Box_1:"AdvancedFilterItem-module__Box_1--yo8eF",Text_0:"AdvancedFilterItem-module__Text_0--BBmW3",Box_2:"AdvancedFilterItem-module__Box_2--aysFO",Box_3:"AdvancedFilterItem-module__Box_3--A_onh",Box_4:"AdvancedFilterItem-module__Box_4--qnVMk",Text_1:"AdvancedFilterItem-module__Text_1--_HTwo",RemoveFilterButton_0:"AdvancedFilterItem-module__RemoveFilterButton_0--dhVAp",Box_5:"AdvancedFilterItem-module__Box_5--NLCm7",Box_6:"AdvancedFilterItem-module__Box_6--JxlLs",Box_7:"AdvancedFilterItem-module__Box_7--MpT3t",Box_8:"AdvancedFilterItem-module__Box_8--cm6Lh"},F={Button_0:"OperatorSelect-module__Button_0--i150F",Octicon_0:"OperatorSelect-module__Octicon_0--PENt3"},A=({filterBlock:e,index:t,setFilterOperator:l})=>{let i=e.operator?C._W[e.operator]:C._W[x.tl.Is];return(0,a.jsxs)(B.W,{children:[(0,a.jsx)(B.W.Anchor,{children:(0,a.jsx)(v.Q,{size:"small",disabled:!e.provider,id:`afd-row-${t}-operator`,"aria-label":`${i&&i.trim()?`${i.trim()}, `:""}Operator ${t+1}`,className:F.Button_0,block:!0,alignContent:"start",trailingAction:()=>(0,a.jsx)(c.TriangleDownIcon,{className:F.Octicon_0}),children:i})}),(0,a.jsx)(B.W.Overlay,{width:"auto",children:(0,a.jsx)(k.l,{selectionVariant:"single",children:(0,y.nV)(e.provider).map(t=>(0,a.jsx)(k.l.Item,{onSelect:()=>l(t),selected:t===e.operator,children:C._W[t]},`advanced-filter-item-${e.id}-operator-${t}`))})})]})};try{A.displayName||(A.displayName="OperatorSelect")}catch{}var T=l(52464);let V={Octicon_0:"QualifierSelect-module__Octicon_0--e5BjZ",Button_0:"QualifierSelect-module__Button_0--Sx55F",ActionMenu_Overlay_0:"QualifierSelect-module__ActionMenu_Overlay_0--kV8Dg",ActionList_0:"QualifierSelect-module__ActionList_0--ePVF_"},D=({filterBlock:e,filterProviders:t,index:l,setFilterProvider:i})=>{let r=e?.provider?.icon,s=e?.provider?.displayName??e?.provider?.key;return(0,a.jsxs)(B.W,{children:[(0,a.jsx)(B.W.Anchor,{children:(0,a.jsx)(v.Q,{id:`afd-row-${l}-qualifier`,"aria-label":`${s&&s.trim()?`${s.trim()}, `:""}Qualifier ${l+1}`,className:(0,n.$)("advanced-filter-item-qualifier",V.Button_0),size:"small",block:!0,alignContent:"start",leadingVisual:()=>r?(0,a.jsx)(r,{className:V.Octicon_0}):null,trailingAction:()=>(0,a.jsx)(c.TriangleDownIcon,{className:V.Octicon_0}),children:(0,y.sF)(e)?s??"Select a filter":T.A})}),(0,a.jsx)(B.W.Overlay,{className:V.ActionMenu_Overlay_0,children:(0,a.jsx)(k.l,{selectionVariant:"single",className:V.ActionList_0,children:t.map((t,l)=>{let{icon:r}=t;return(0,a.jsxs)(k.l.Item,{onSelect:()=>i(t),selected:t.key===e.provider?.key,children:[r&&(0,a.jsx)(k.l.LeadingVisual,{children:(0,a.jsx)(r,{})}),t.displayName??t.key]},`advanced-filter-item-${e.id}-provider-${t.key}-${l}`)})})})]})};try{D.displayName||(D.displayName="QualifierSelect")}catch{}var E=l(87330);let P={IconButton_0:"RemoveFilterButton-module__IconButton_0--E6OIE"},O=({ariaLabel:e,onClick:t,className:l,testId:i=""})=>(0,a.jsx)(E.K,{icon:c.XIcon,size:"small",variant:"invisible","aria-label":e,onClick:t,className:(0,n.$)(l,P.IconButton_0),...(0,r.G)(i)});try{O.displayName||(O.displayName="RemoveFilterButton")}catch{}var R=l(90021),M=l(9591);let L={Button_0:"BooleanValueSelect-module__Button_0--uyDWd",Octicon_0:"BooleanValueSelect-module__Octicon_0--sd1Va"};var G=l(39459),W=l(70892);let U={Box_0:"ValuePlaceholder-module__Box_0--sRIos",Box_1:"ValuePlaceholder-module__Box_1--AzhbD",Octicon_0:"ValuePlaceholder-module__Octicon_0--nMPaj",AvatarStack:"ValuePlaceholder-module__AvatarStack--UPe_t"},Q=({filterBlock:e})=>{let t=e.value?.values.filter(e=>e.valid&&""!==e.value)??[];if(0===t.length)return(0,a.jsx)("div",{className:U.Box_0,children:"Make a selection"});let l=e.value?.values?.[0]?.displayName,i=e.value?.values?.[0]?.name,r=e.value?.values?.[0]?.description,s=(0,y.I8)(e.value?.values?.[0]?.value),n=`${t.length} selected`;return 1===t.length&&(n=l??i??r??s),(0,a.jsxs)("div",{className:U.Box_1,children:[(0,a.jsx)(H,{filterBlock:e}),n]})},H=({filterBlock:e})=>{if(!e.value?.values||e.value.values.length<1)return null;if(e.provider?.type===x.CH.User){let t=[];for(let l of e.value?.values??[]){let i=l?.avatar?.url??l?.avatarUrl;i&&t.push((0,a.jsx)(G.r,{src:i,size:16,alt:l.displayName??(0,y.I8)(l.value)??""},`${e.provider.key}-${e.id}-avatar-${(0,y.I8)(l.value)}`))}if(t.length>0)return(0,a.jsx)(W.A,{disableExpand:!0,size:16,className:U.AvatarStack,children:t})}if(e.value?.values?.length===1){let t=e.provider?.filterValues?.find(t=>t.value===e.value?.values?.[0]?.value),l=t?.icon;if(l)return(0,a.jsx)(l,{className:U.Octicon_0})}return null};try{Q.displayName||(Q.displayName="ValuePlaceholder")}catch{}try{H.displayName||(H.displayName="ValuePlaceholderIcon")}catch{}let K=({index:e,filterBlock:t,setFilterValues:l})=>(0,a.jsxs)(B.W,{children:[(0,a.jsx)(B.W.Anchor,{children:(0,a.jsx)(v.Q,{size:"small",className:L.Button_0,"aria-label":`Value ${e+1}`,trailingVisual:()=>(0,a.jsx)(c.TriangleDownIcon,{className:L.Octicon_0}),...(0,r.G)("afd-row-value-select-boolean-button"),children:(0,a.jsx)(Q,{filterBlock:t})})}),(0,a.jsx)(B.W.Overlay,{children:(0,a.jsxs)(k.l,{selectionVariant:"single",...(0,r.G)("afd-row-value-select-list"),children:[(0,a.jsx)(k.l.Item,{onSelect:()=>l(!0),selected:void 0===(0,y.I8)(t.value?.values[0]?.value)||"true"===(0,y.I8)(t.value?.values[0]?.value),children:"True"}),(0,a.jsx)(k.l.Item,{onSelect:()=>l(!1),selected:"false"===(0,y.I8)(t.value?.values[0]?.value),children:"False"})]})})]});try{K.displayName||(K.displayName="BooleanValueSelect")}catch{}let q={Octicon_0:"ValueSelect-module__Octicon_0--sV5zM",Box_0:"ValueSelect-module__Box_0--nPnZ6",TextInput_0:"ValueSelect-module__TextInput_0--uGUsB",Box_1:"ValueSelect-module__Box_1--mcNDC",TextInput_1:"ValueSelect-module__TextInput_1--osf96",Button_0:"ValueSelect-module__Button_0--ydJ6J",Overlay:"ValueSelect-module__Overlay--nk6DQ"},z=new Set([x.CH.Select,x.CH.User]),X=e=>e&&z.has(e),J=e=>e&&e===x.CH.Date,Y=new Set([x.CH.Number,x.CH.Date,x.CH.Text]),Z=e=>e&&Y.has(e),ee=({filterBlock:e,setValuesFilter:t,setFilterValues:l,setFilterFrom:i,setFilterText:s,setFilterTo:u,valueElements:d,index:p,selectedFilteredValues:m})=>{let[h,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{h||t("")},[h,t]);let _=(0,o.useMemo)(()=>({renderAnchor:({...t})=>(0,a.jsx)(v.Q,{...t,id:`afd-row-${p}-value`,size:"small",alignContent:"start",disabled:!e.operator,"aria-label":`Value ${p+1}`,className:(0,n.$)("advanced-filter-item-value",q.Button_0),trailingVisual:()=>(0,a.jsx)(c.TriangleDownIcon,{className:q.Octicon_0}),...(0,r.G)("afd-row-value-select-button"),children:(0,a.jsx)("div",{className:q.Box_0,children:(0,a.jsx)(Q,{filterBlock:e})})}),placeholderText:"Filter values",open:h,onOpenChange:f,items:d,onFilterChange:t,showItemDividers:!1,overlayProps:{width:"small",className:q.Overlay},...(0,r.G)("afd-row-value-select")}),[h,d,t,p,e]);if(X(e.provider?.type))return Array.isArray(m),(0,a.jsx)(R.X,{..._,selected:m,onSelectedChange:l});if(e.provider?.type===x.CH.Boolean)return(0,a.jsx)(K,{index:p,filterBlock:e,setFilterValues:l});if(Z(e.provider?.type)){if(e.operator===x.tl.Between)return(0,a.jsx)(et,{index:p,fromValue:(0,y.I8)(e.value?.values[0]?.value)??"",toValue:(0,y.I8)(e.value?.values[1]?.value)??"",setFromValue:i,setToValue:u});let t=J(e.provider?.type)?"YYYY-MM-DD":`Enter a ${e.provider?.type.toString().toLowerCase()??"value"}`,l=e.provider?.type===x.CH.Number?"number":"text";return(0,a.jsx)(M.A,{"aria-label":`Value ${p+1}`,size:"small",type:l,value:e.value?.raw,onChange:s,placeholder:t,className:q.TextInput_0,...(0,r.G)(`afd-row-${p}`)})}return(0,a.jsx)(M.A,{"aria-label":`Value ${p+1}`,size:"small",value:e.value?.raw,onChange:s,placeholder:"Enter search text",className:q.TextInput_0,...(0,r.G)(`afd-row-${p}`)})},et=({index:e,fromValue:t,toValue:l,setFromValue:i,setToValue:s})=>(0,a.jsxs)("div",{className:q.Box_1,children:[(0,a.jsx)(M.A,{"aria-label":`Value ${e+1} From`,size:"small",value:t,onChange:i,placeholder:"From",className:q.TextInput_1,...(0,r.G)(`afd-row-${e}-from`)}),(0,a.jsx)("span",{children:"-"}),(0,a.jsx)(M.A,{"aria-label":`Value ${e+1} To`,size:"small",value:l,onChange:s,placeholder:"To",className:q.TextInput_1,...(0,r.G)(`afd-row-${e}-to`)})]});try{ee.displayName||(ee.displayName="ValueSelect")}catch{}try{et.displayName||(et.displayName="BetweenFilterInputs")}catch{}let el=({index:e,filterBlock:t,filterProviders:l,updateFilterBlock:i,deleteFilterBlock:s})=>{let{config:u}=(0,_.U2)(),{filterQuery:d}=(0,_.g0)(),[c,p]=(0,o.useState)(t.provider?.filterValues??[]),[v,m]=(0,o.useState)(""),[h,f]=(0,o.useState)(t.provider?.options?.filterTypes.multiValue?[]:void 0),B=(0,o.useMemo)(()=>(0,y.sF)(t)?c.filter(e=>!(v.length>0)||(0,I.qA)(v,(0,y.I8)(e.value)??"")||(0,I.qA)(v,e.displayName??"")):[],[t,v,c]),k=(0,o.useMemo)(()=>{let e=Array.from(l);return t.provider&&!l.find(e=>e.key===t.provider?.key)&&e.push(t.provider),e.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0)},[t.provider,l]),b=(0,o.useMemo)(()=>{let e=Array.isArray(h)?[...h]:h?[h]:[];return B?.reduce((e,l)=>{let a=t.provider?.getValueRowProps(l);return -1===(e.findIndex(e=>e.text===a?.text)??-1)&&e.push({...a,leadingVisual:a?.leadingVisual?()=>a.leadingVisual:void 0,trailingVisual:a?.trailingVisual?()=>a.trailingVisual:void 0}),e},e)},[t.provider,B,h]),N=(0,o.useCallback)(e=>{if(e.type!==x.CH.RawText){let l=t.provider?.type===x.CH.RawText&&e.type===x.CH.Text,a=e.type===t.provider?.type||l?t.value:{raw:"",values:[]};i({...t,key:{value:e.key,valid:!0},provider:e,operator:(0,y.nV)(e)[0],value:a})}else{let e=t.provider?.type===x.CH.Text&&t.value?t.value:{raw:"",values:[]};i({...t,key:void 0,provider:g.J,operator:(0,y.nV)(g.J)[0],raw:e.raw,value:e})}},[t,i]),w=(0,o.useCallback)(e=>{let l={};if(t.value&&!C.BP.includes(e)){let e=[];l={value:{values:t.value.values.map(t=>{let l=(0,y.M5)(t.value)?.replace(/^[<>]=?/g,"").replaceAll("..","")??"";return e.push(l),{...t,value:l}})??[],raw:e.join(u.valueDelimiter)}}}i({...t,operator:e,...l})},[u.valueDelimiter,t,i]),j=(0,o.useCallback)(e=>{let l=[];if(void 0===e)l=[];else if("boolean"==typeof e)l=[{value:e.toString(),displayName:(0,y.ZH)(e.toString())}];else if(t.provider?.options?.filterTypes.multiValue&&Array.isArray(e)){let a=t.value?.values.filter(e=>!(0,I.qA)(v,(0,y.I8)(e.value)??"")&&!(0,I.qA)(v,e.displayName??""));for(let t of(a&&(l=a),e)){let e=c.find(e=>e.displayName===t.text||e.value===t.text);e&&l.push(e)}}else{let t=e.text,a=c.find(e=>e.displayName===t||e.value===t);if(void 0===a)return;l=[a]}l=l.filter(e=>e.value.length>0),f("boolean"==typeof e?void 0:e),i({...t,value:{...t.value,raw:l.map(e=>(0,y.I8)(e.value)).join(u.valueDelimiter),values:l.map(e=>({...e,valid:!0}))}})},[u.valueDelimiter,t,i,c,v]),$=(0,o.useCallback)(e=>{let l=[{value:e.target.value,valid:!0},t.value?.values?.[1]??{value:"",valid:!0}],a=`${(0,y.I8)(l[0]?.value)}..${(0,y.I8)(l[1]?.value)}`;i({...t,value:{values:l,raw:a}})},[t,i]),F=(0,o.useCallback)(e=>{let l=[t.value?.values?.[0]??{value:"",valid:!0},{value:e.target.value,valid:!0}],a=`${(0,y.I8)(l[0]?.value)}..${(0,y.I8)(l[1]?.value)}`;i({...t,value:{values:l,raw:a}})},[t,i]),T=(0,o.useCallback)(e=>{i({...t,value:{values:[{value:e.target.value,valid:!0}],raw:e.target.value}})},[t,i]);return(0,o.useEffect)(()=>{(async()=>{if(t.provider){let e=await t.provider.getSuggestions(d,{...t,value:{values:[{value:v,valid:!0}],raw:v}},u);p(e?e.filter(e=>e.type!==x.ak.NoValue&&!e.displayName?.startsWith("Exclude")):[])}})()},[u,t,t.provider,d,v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("fieldset",{className:(0,n.$)(`advanced-filter-item-${e}`,S.Box_0),...(0,r.G)("afd-filter-row"),children:[(0,a.jsx)("legend",{className:S.Box_1,children:(0,a.jsx)("h2",{children:`Row ${e+1}`})}),(0,a.jsx)("span",{className:S.Text_0,children:e+1}),(0,a.jsxs)("div",{className:S.Box_2,children:[(0,a.jsxs)("div",{className:S.Box_3,children:[(0,a.jsxs)("div",{className:S.Box_4,children:[(0,a.jsx)("span",{className:S.Text_1,children:"Qualifier"}),(0,a.jsx)(D,{filterBlock:t,index:e,filterProviders:k,setFilterProvider:N})]}),(0,a.jsxs)("div",{className:S.Box_4,children:[(0,a.jsx)("span",{className:S.Text_1,children:"Operator"}),(0,a.jsx)(A,{setFilterOperator:w,filterBlock:t,index:e})]}),(0,a.jsxs)("div",{className:S.Box_4,children:[(0,a.jsx)("span",{className:S.Text_1,children:"Value"}),(0,a.jsx)(ee,{filterBlock:t,index:e,setValuesFilter:m,valueElements:b,selectedFilteredValues:h,setFilterValues:j,setFilterFrom:$,setFilterText:T,setFilterTo:F})]}),(0,a.jsx)(O,{onClick:()=>s(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`,testId:`afd-filter-row-delete-${e}`,className:S.RemoveFilterButton_0})]}),(0,a.jsxs)("div",{className:S.Box_5,children:[(0,a.jsx)("div",{children:(0,a.jsx)(O,{onClick:()=>s(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`})}),(0,a.jsx)("div",{className:S.Box_6,children:e+1})]})]})]}),(0,a.jsx)("div",{className:S.Box_7,children:(0,a.jsx)("div",{className:S.Box_8})})]})};try{el.displayName||(el.displayName="AdvancedFilterItem")}catch{}let ea={Box_0:"FilterList-module__Box_0--j9Mr4",Box_1:"FilterList-module__Box_1--C4Ox3",Box_2:"FilterList-module__Box_2--P3bNS",Box_3:"FilterList-module__Box_3--PpvTA",Box_4:"FilterList-module__Box_4--uvU7H",Text_0:"FilterList-module__Text_0--DLCnp"},ei=({filterBlocks:e,filterProviders:t,updateFilterBlock:l,deleteFilterBlock:i,isNarrowBreakpoint:r,addFilterButtonMobileLastRowRef:s,addNewFilterBlock:n})=>(0,a.jsxs)("div",{className:ea.Box_0,children:[(0,a.jsxs)("div",{className:ea.Box_1,children:[(0,a.jsx)("div",{className:ea.Box_2}),(0,a.jsx)("div",{className:ea.Box_3}),(0,a.jsx)("span",{className:ea.Box_3,children:"Qualifier"}),(0,a.jsx)("span",{className:ea.Text_0,children:"Operator"}),(0,a.jsx)("span",{className:ea.Box_3,children:"Value"}),(0,a.jsx)("div",{})]}),e.map((e,r)=>(0,a.jsx)(el,{filterBlock:e,filterProviders:t,updateFilterBlock:l,index:r,deleteFilterBlock:i},`advanced-filter-item-${r}`)),(0,a.jsx)("div",{className:ea.Box_4,children:(0,a.jsx)(N,{size:r?"medium":"small",ref:s,filterProviders:t,addNewFilterBlock:n})})]});try{ei.displayName||(ei.displayName="FilterList")}catch{}let er=e=>e.map((e,t)=>({...e,id:t})),es=(0,h.A)(e=>(t,l)=>l.map(t=>{let l=(0,y.n$)(t,e);return t.raw===l?t:{...t,raw:l}})),en=({filterButtonVariant:e="normal",isStandalone:t=!1,dialogOpen:l,setDialogOpen:i})=>{let{config:h}=(0,_.U2)(),{filterQuery:B,filterProviders:k,updateFilter:b}=(0,_.g0)(),{hideSuggestions:j}=(0,_.Pt)(),I=(0,o.useRef)(null),{sendClickAnalyticsEvent:C}=(0,d.S)(),S=(0,o.useRef)(null),F=(0,o.useRef)(null),A=(0,o.useRef)(null),T=(0,s.tv)({regular:!1,narrow:!0},!1),V=(0,y.vU)(B.blocks),D=es(h),[E,P]=(0,o.useReducer)(D,V),[O,R]=(0,o.useState)(!1),M=(0,p.S)(),L=(0,o.useCallback)(async()=>!O||await M({...f.D.advancedFilterDialogCloseConfirmation,confirmButtonType:"danger"}),[M,O]),G=(0,o.useMemo)(()=>{let e=Object.values(k).filter(e=>(e.options.filterTypes.multiKey||E.filter(t=>(0,y.sF)(t)&&t.provider?.key===e.key).length<1)&&e.options.support.status===x.b9.Supported);return h.disableAdvancedTextFilter&&"button"===h.variant||e.push(g.J),e.sort((e,t)=>e.key?.localeCompare(t.displayName??"")??0)},[h.disableAdvancedTextFilter,h.variant,E,k]),W=(0,o.useCallback)(()=>{P(V),R(!1)},[V]),U=(0,o.useCallback)(e=>{P([...E,{id:E.length,type:x._B.Filter,provider:e,key:(0,y.Nn)(e),operator:(0,y.nV)(e)[0],value:{raw:"",values:[{value:"",valid:!0}]}}]),R(!0),setTimeout(()=>{let e=document.querySelectorAll(".advanced-filter-item-qualifier");e[e.length-1]?.focus()},10)},[E]),Q=(0,o.useCallback)(e=>{R(!0),P(E.map(t=>t.id===e.id?e:t))},[E]),H=(0,o.useCallback)(e=>{let t,l=E.filter((t,l)=>l!==e);P(er(l)),t=T?l.length>0?A:F:S,setTimeout(()=>t.current?.focus(),20)},[E,T]),K=t?"button_only":"button_and_input",q=(0,o.useCallback)(()=>{W(),j(),i(!0),C({action:"open_advanced_filter_dialog",label:`variant:${K}`})},[j,W,i,C,K]),z=(0,o.useCallback)(async e=>{(e||await L())&&(i(!1),W(),setTimeout(()=>{I.current?.focus()},20))},[L,i,W]),X=(0,o.useCallback)(e=>{let t=e.filtersUsed.length>0?e.filtersUsed.join(","):"";C({action:"submit_filter_query",label:`variant:${K};event_type:${x.FT.DialogSubmit};used_filter_providers:${t};nested_group_depth:${e.nestedGroupCount};submitted_by:filter_dialog`})},[C,K]),J=(0,o.useCallback)(async()=>{let e=E.map(({raw:e})=>e).join(" ");b(e,e.length,X,x.FT.DialogSubmit),await z(!0)},[z,E,X,b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Q,{ref:I,onClick:q,...(0,r.G)("advanced-filter-button"),"aria-label":"Advanced filter dialog",leadingVisual:c.FilterIcon,count:B.filterCount>0?B.filterCount:void 0,className:(0,n.$)(w.Button_0,t&&w.standaloneButton),children:"normal"===e&&"Filter"}),l&&(0,a.jsx)(m.l,{onClose:()=>z(),role:"dialog",title:"Advanced filters",position:{narrow:"fullscreen",regular:"center"},renderFooter:()=>(0,a.jsxs)("div",{className:w.Box_0,children:[(0,a.jsx)("div",{className:w.Box_1,children:(0,a.jsx)(N,{size:T?"medium":"small",ref:S,filterProviders:G,addNewFilterBlock:U})}),(0,a.jsxs)("div",{className:w.Box_2,children:[(0,a.jsx)(v.Q,{size:T?"medium":"small",onClick:()=>z(),...(0,r.G)("afd-cancel"),children:"Cancel"}),(0,a.jsx)(v.Q,{size:T?"medium":"small",variant:"primary",onClick:J,...(0,r.G)("afd-apply"),children:"Apply"})]})]}),renderBody:()=>(0,a.jsxs)("div",{className:(0,n.$)("advanced-filter-dialog-content",w.Box_4,E.length&&w.nonEmpty),...(0,r.G)("advanced-filter-dialog-content"),children:[(0,u.G7)("primer_react_unified_portal_root")?null:(0,a.jsx)("div",{id:"__primerPortalRoot__",style:{zIndex:10,position:"absolute",width:"100%"}}),(0,a.jsxs)("div",{className:w.Box_3,children:[E.length<1&&(0,a.jsx)($,{isNarrowBreakpoint:T,addFilterButtonMobileRef:F,filterProviders:G,addNewFilterBlock:U}),E.length>0&&(0,a.jsx)(ei,{addFilterButtonMobileLastRowRef:A,addNewFilterBlock:U,deleteFilterBlock:H,filterBlocks:E,filterProviders:G,isNarrowBreakpoint:T,updateFilterBlock:Q})]})]})})]})};try{en.displayName||(en.displayName="AdvancedFilterDialog")}catch{}let eo={clearButton:"ClearButton-module__clearButton--KL73f"},eu=(0,o.memo)(()=>{let{suspendFocus:e}=(0,_.Ge)(),{rawFilterRef:t,clearFilter:l}=(0,_.g0)();if(t?.current.length!==0)return(0,a.jsx)(E.K,{...(0,r.G)("filter-clear-query"),as:"button",className:eo.clearButton,"aria-label":"Clear filter",onMouseDown:t=>e(t.currentTarget),onKeyDown:t=>e(t.currentTarget),onClick:()=>l(),icon:c.XCircleFillIcon,variant:"invisible",size:"small"})});eu.displayName="ClearButton";var ed=l(52123),ec=l(16099);let ep={Box_0:"Filter-module__Box_0--BNVXr",Box_1:"Filter-module__Box_1--FEs2o",Box_2:"Filter-module__Box_2--cXSlw",leftRounded:"Filter-module__leftRounded--oMsKD",rightRounded:"Filter-module__rightRounded--uJJOd",hasSubmit:"Filter-module__hasSubmit--Kbnqi"};var ev=l(44308);let em={Box_0:"FilterInputIcon-module__Box_0--GpqZN",Octicon_0:"FilterInputIcon-module__Octicon_0--aj4CD"},eh=()=>(0,a.jsx)("div",{className:em.Box_0,children:(0,a.jsx)(c.SearchIcon,{"aria-label":"Search",className:em.Octicon_0})});try{eh.displayName||(eh.displayName="FilterInputIcon")}catch{}let ef={Box_0:"FilterInputWrapper-module__Box_0--chXAO",Box_1:"FilterInputWrapper-module__Box_1--vewob"},e_=({children:e,isStandalone:t=!1})=>t?(0,a.jsx)("div",{...(0,r.G)("filter-bar"),className:ef.Box_0,children:e}):(0,a.jsx)("div",{...(0,r.G)("filter-bar"),className:ef.Box_1,children:e});try{e_.displayName||(e_.displayName="FilterInputWrapper")}catch{}var eg=l(17515);let ex={Box_0:"Input-module__Box_0--Don6t",Box_1:"Input-module__Box_1--k2OuJ",Box_2:"Input-module__Box_2--aQerX",Box_3:"Input-module__Box_3--gjsry",Box_4:"Input-module__Box_4--GVHsf"},ey={Box_0:"StyledInput-module__Box_0--fI46v",Box_1:"StyledInput-module__Box_1--_Dcqj",Box_2:"StyledInput-module__Box_2--JRyid",KeyBlock_0:"StyledInput-module__KeyBlock_0--Y18rv"},eB={Text_0:"StyledInputBlocks-module__Text_0--SEA41"},ek=({text:e})=>(0,a.jsx)("span",{className:"text-block",children:e}),eb=({text:e})=>(0,a.jsx)("span",{className:"delimiter space-delimiter",children:e}),eN=({delimiter:e})=>(0,a.jsx)("span",{className:"delimiter",children:e}),ew=({keyword:e})=>(0,a.jsx)("span",{className:(0,n.$)("keyword-block",eB.Text_0),children:e}),ej=({text:e,className:t})=>(0,a.jsx)("span",{"data-type":"filter",className:t,children:e});try{ek.displayName||(ek.displayName="TextBlock")}catch{}try{eb.displayName||(eb.displayName="SpaceBlock")}catch{}try{eN.displayName||(eN.displayName="Delimiter")}catch{}try{ew.displayName||(ew.displayName="KeywordBlock")}catch{}try{ej.displayName||(ej.displayName="KeyBlock")}catch{}let e$=[x.tl.GreaterThan,x.tl.LessThan,x.tl.Before,x.tl.After],eI=[x.tl.GreaterThanOrEqualTo,x.tl.LessThanOrEqualTo,x.tl.BeforeAndIncluding,x.tl.AfterAndIncluding],eC=()=>{let{config:e}=(0,_.U2)(),{inputFocused:t,updateStyledInputBlockCount:l}=(0,_.Ge)(),{rawFilterRef:i,filterQuery:r}=(0,_.g0)(),s=(0,o.useRef)([]),u=(e,l,i,s)=>{let{id:o,key:u,operator:d}=e,{value:c,valid:p}=l;if(p){let e=0;e$.includes(d)?e=1:eI.includes(d)&&(e=2);let t=(0,y.I8)(c)?.charAt(e);return t&&C.wO.includes(t)?(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("valid-filter-value",ey.Box_0),children:(0,y.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,y.I8)(c)}`):(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("valid-filter-value",ey.Box_1),children:(0,y.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,y.I8)(c)}`)}return void 0===p||(!1!==p||r.activeBlock?.id===o)&&t?(0,a.jsx)("span",{"data-type":"filter-value",children:(0,y.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,y.I8)(c)}`):(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("invalid-filter-value",ey.Box_2),children:(0,y.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,y.I8)(c)}`)},d=(0,o.useMemo)(()=>{let l=[];return(0,y.Ed)(r,i?.current)?(!function i(s,o){for(let[d,c]of s.entries()){let s;if((0,y.aK)(c)){let{key:l,operator:i,value:p}=c,v=!1===l.valid&&(r.activeBlock?.id!==c.id||!t),m=(0,a.jsx)(ej,{text:l.value,className:(0,n.$)(v&&ey.KeyBlock_0)},`filter-block-${d}-key`),h=(0,a.jsx)(eN,{delimiter:e.filterDelimiter},`filter-block-${d}-delimiter`),f=[];if(i===x.tl.Between){let e=p.values[0],t=p.values[1];e&&f.push(u(c,e,d,1)),f.push((0,a.jsx)("span",{className:"delimiter",children:".."},`filter-block-${d}-${l.value}-delimiter-1`)),t&&f.push(u(c,t,d,2))}else f=p.values.map((t,i)=>(0,a.jsxs)("span",{children:[i>0&&(0,a.jsx)("span",{className:"delimiter",children:e.valueDelimiter},`filter-block-${d}-${l.value}-delimiter-${i}`),u(c,t,d)]},`filter-block-${d}-${l.value}-values-${i}}`));s=(0,a.jsxs)("span",{"data-type":"filter-expression",children:[m,h,f]},`filter-block-${o}-${d}-${l.value}`)}else c.type===x._B.Space?s=(0,a.jsx)(eb,{text:c.raw},`space-block-${o}-${d}`):c.type===x._B.Keyword?s=(0,a.jsx)(ew,{keyword:c.raw},`keyword-block-${o}-${d}`):(0,y.W9)(c)?(l.push((0,a.jsx)(ek,{text:"("},`text-open-${o}-${d}`)),i(c.blocks,o?`${o}-${d}`:`${d}`),l.push((0,a.jsx)(ek,{text:")"},`text-close-${o}-${d}`))):s=(0,a.jsx)(ek,{text:c.raw},`text-block-${o}-${d}`);l.push(s)}}(r.blocks,"root"),s.current=l,l):s.current},[r.raw,r.blocks,r.activeBlock,r.isValidated,t,e.filterDelimiter,e.valueDelimiter]);return(0,o.useEffect)(()=>{l(d.length)},[d.length,l]),(0,a.jsx)(a.Fragment,{children:d})};try{eC.displayName||(eC.displayName="StyledInput")}catch{}let eS=({id:e,hasValidationMessage:t=!1,placeholder:l="Search or filter",onKeyDown:i})=>{let{suggestionsVisible:s,activeSuggestion:u,suggestionGroups:d}=(0,_.Pt)(),{caretRef:c,inputFocused:p,inputKeyDown:v,inputOnBlur:m,inputOnCompositionStart:h,inputOnCompositionEnd:f,inputOnChange:g,inputOnFocus:x,inputRef:y,inputSelectionEnd:B,inputSelectionStart:k,inputValue:b,updateInputSelection:N}=(0,_.Ge)(),w=(0,o.useRef)(null),[j,$]=(0,o.useState)(0),I=(0,o.useRef)(null),C=(0,o.useCallback)(e=>{N(e.selectionStart??0,e.selectionEnd??0)},[N]),S=(0,o.useCallback)(e=>{C(e.currentTarget),v(e),i?.(e)},[C,v,i]),F=(0,o.useCallback)(e=>{C(e.currentTarget)},[C]),A=(0,o.useMemo)(()=>{let e=Math.max((w.current?.scrollWidth??0)+2,ed.$_);return`${e}px`},[k,w.current?.scrollWidth,b]);(0,eg.N)(()=>{let e=c.current,t=I.current;e&&t&&(e.offsetLeft<j?$(e.offsetLeft-t.clientWidth-ed.$_):e.offsetLeft>j+t.clientWidth?$(e.offsetLeft-t.clientWidth+ed.$_):t.scrollLeft=j)},[c,j,k,b]);let T=(0,o.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:k?b.substring(0,k):b}),(0,a.jsx)("span",{...(0,r.G)("filter-cursor"),ref:c}),(0,a.jsx)("span",{children:k?b.substring(k):null})]}),[c,k,b]),V=(0,o.useMemo)(()=>s&&d.some(e=>e.suggestions.length>0),[d,s]);return(0,o.useEffect)(()=>{y.current&&k>-1&&p&&(y.current.selectionStart=k,y.current.selectionEnd=B)},[y,k,B,b]),(0,a.jsxs)("div",{...(0,r.G)("styled-input-container"),ref:I,tabIndex:-1,className:(0,n.$)("styled-input-container",ex.Box_0),children:[(0,a.jsx)("div",{...(0,r.G)("styled-input-content"),"aria-hidden":"true",className:(0,n.$)("styled-input-content",ex.Box_1),children:(0,a.jsx)(eC,{})}),(0,a.jsxs)("div",{...(0,r.G)("filter-input-wrapper"),className:ex.Box_2,children:[(0,a.jsx)("div",{...(0,r.G)("filter-sizer"),ref:w,"aria-hidden":"true",className:ex.Box_3,children:T}),(0,a.jsx)("input",{id:`${e}-input`,role:"combobox","aria-expanded":V,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":`${e}-results`,"aria-activedescendant":null!==u&&-1!==u&&s?`suggestion-${u}`:void 0,"aria-describedby":t?`${e}-validation-message`:"",placeholder:l,ref:y,value:b,onFocus:x,onBlur:m,onCompositionStart:h,onCompositionEnd:f,onKeyDown:S,onClick:F,onChange:g,name:`${e}-inputname`,autoComplete:"off",spellCheck:"false",style:{width:A},className:ex.Box_4,...(0,r.G)("filter-input")})]})]})};try{eS.displayName||(eS.displayName="Input")}catch{}let eF={IconButton_0:"SubmitButton-module__IconButton_0--AJwMO"},eA=()=>{let{onSubmit:e}=(0,_.g0)();return(0,a.jsx)(E.K,{"aria-label":"Search",size:"medium",icon:c.SearchIcon,variant:"default",onClick:()=>{e(x.FT.ExplicitSubmit,"input_with_button")},className:eF.IconButton_0})};try{eA.displayName||(eA.displayName="SubmitButton")}catch{}var eT=l(94232),eV=l(30422);let eD={item:"SuggestionItem-module__item--hWolC",Box_0:"SuggestionItem-module__Box_0--FO_jZ",GitHubAvatar_0:"SuggestionItem-module__GitHubAvatar_0--_U3KQ",UnsafeHTMLText_0:"SuggestionItem-module__UnsafeHTMLText_0--MGu8j",boldText:"SuggestionItem-module__boldText--WYZBt",normalText:"SuggestionItem-module__normalText--mu4Jo",Box_1:"SuggestionItem-module__Box_1--GDdRF",ActionList_Description:"SuggestionItem-module__ActionList_Description--Y43Fu"},eE=e=>{let{suggestionId:t,active:l,icon:i,iconColor:r,value:s,avatar:u,displayName:d,ariaLabel:c}=e,{suggestionSelected:p,activeSuggestionRef:v}=(0,_.Pt)(),{inputRef:m}=(0,_.Ge)(),h=(0,o.useCallback)(()=>{p(e),m.current?.focus()},[m,e,p]),f=(0,o.useCallback)(e=>{l&&e?(v.current=e,e.scrollIntoView({block:"nearest"})):v.current=null},[l,v]);return(0,a.jsxs)(k.l.Item,{id:`suggestion-${t}`,onSelect:h,active:l,role:"option","aria-label":c,"aria-selected":l,tabIndex:-1,"aria-labelledby":void 0,ref:f,className:eD.item,children:[(i||r||u)&&(0,a.jsx)(k.l.LeadingVisual,{children:(0,a.jsxs)("div",{className:eD.Box_0,children:[i?(0,a.jsx)(i,{fill:r??"currentcolor"}):r?(0,a.jsx)("div",{style:{backgroundColor:r},className:eD.Box_1}):null,u&&(0,a.jsx)(G.r,{src:u.url,alt:(0,y.I8)(s)??"User Avatar",square:!1,className:eD.GitHubAvatar_0})]})}),(0,a.jsx)(eV.BC,{html:d??(0,y.I8)(s)??"",className:(0,n.$)(eD.UnsafeHTMLText_0,e.description?eD.boldText:eD.normalText)}),e.description&&void 0!==e.inlineDescription&&(0,a.jsx)(k.l.Description,{variant:e.inlineDescription?"inline":"block",className:eD.ActionList_Description,truncate:!!e.inlineDescription,children:e.description})]})};try{eE.displayName||(eE.displayName="SuggestionItem")}catch{}let eP={Box_0:"SuggestionsList-module__Box_0--Wvm5A",Box_1:"SuggestionsList-module__Box_1--ZCfM4",ActionList_0:"SuggestionsList-module__ActionList_0--aBWYm",Box_3:"SuggestionsList-module__Box_3--FlurF",showOverlay:"SuggestionsList-module__showOverlay--KgKYQ"},eO=({id:e})=>{let{id:t}=(0,_.U2)();e=e??t;let{suggestionsListRef:l,activeSuggestion:i,isFetchingSuggestions:s,position:u,suggestionGroups:d,suggestionsVisible:c}=(0,_.Pt)(),{suspendFocus:p}=(0,_.Ge)(),v=(e,t="wave")=>(0,a.jsxs)("div",{className:eP.Box_0,children:[(0,a.jsx)(eT.O,{variant:"elliptical",width:"20px",height:"20px",animationStyle:t}),(0,a.jsx)(eT.O,{variant:"rounded",width:"random",height:"16px",animationStyle:t})]},e),m=(0,o.useMemo)(()=>(0,a.jsx)("div",{children:Array(8).fill(1).map((e,t)=>v(`loading-skeleton-${t}`))}),[]),h=(0,o.useMemo)(()=>v("prefetched-loading-skeleton","pulse"),[]),f=c&&d.some(e=>e.suggestions.length>0)||s,g=(0,o.useMemo)(()=>{let e=-1,t=[];return d.map((l,s)=>{l.suggestions.length>0&&(t.push((0,a.jsxs)(k.l.Group,{children:[l.title&&(0,a.jsx)(k.l.GroupHeading,{...(0,r.G)("suggestions-heading"),"aria-hidden":"true",children:l.title}),l.suggestions.map(t=>(e++,(0,o.createElement)(eE,{...t,suggestionId:e,key:(0,y.W5)("suggestion",t.id,`${(0,y.I8)(t.value)}-${t.displayName}-${t.description}`),active:e===i})))]},(0,y.W5)("group",l.id))),s++<d.length-1&&(d[s++]?.suggestions??[]).length>0&&t.push((0,a.jsx)(k.l.Divider,{},(0,y.W5)("divider",l.id))))}),t},[i,d]);return(0,a.jsx)("div",{className:eP.Box_1,...(0,r.G)("backdrop-anchor"),children:(0,a.jsx)("div",{id:`${e}-suggestions`,ref:l,className:(0,n.$)(eP.Box_3,f&&eP.showOverlay),style:{left:`${u?u.left:0}px`},children:(0,a.jsxs)(k.l,{...(0,r.G)("filter-results"),"aria-label":s?"Loading Suggestions":"Suggestions",role:"listbox",id:`${e}-results`,className:eP.ActionList_0,onMouseDown:e=>p(e.currentTarget),children:[f&&d.some(e=>e.suggestions.length>0)&&g,f&&s&&(0,a.jsx)("div",{children:d.some(e=>e.suggestions.length>0)?h:m})]})})})};try{eO.displayName||(eO.displayName="SuggestionsList")}catch{}var eR=l(52811),eM=l(38911);let eL={Banner:"ValidationMessage-module__Banner--KyRlC",Box_0:"ValidationMessage-module__Box_0--_x3JI",Box_2:"ValidationMessage-module__Box_2--V7TSg",VerifiedHTMLBox_0:"ValidationMessage-module__VerifiedHTMLBox_0--c5V1E"},eG=({id:e,messages:t})=>{let{sendAnalyticsEvent:l}=(0,d.s)();return((0,o.useEffect)(()=>{if(t&&t.length>0){let e=t.map(e=>e.replaceAll(/<pre>|<\/pre>/g,"'")).join(". ").trim(),a=`${f.D.filterInvalid(t.length)} ${e}.`;(0,eR.i)(a),l("filter.validation_errors","FILTER_VALIDATION_ERRORS",{messages:e})}},[l,t]),!t||t.length<1)?null:(0,a.jsxs)(eM.l,{id:e,variant:"warning",className:eL.Banner,children:[(0,a.jsx)(eM.l.Title,{children:(0,a.jsx)("span",{...(0,r.G)("validation-error-count"),children:f.D.filterInvalid(t.length)})}),(0,a.jsx)("div",{className:eL.Box_0,children:(0,a.jsx)("ul",{className:eL.Box_2,...(0,r.G)("validation-error-list"),children:t.map(e=>(0,a.jsx)(eV.Pk,{as:"li",html:e,domPurifyConfig:{ALLOWED_TAGS:["pre"]},className:eL.VerifiedHTMLBox_0},e.replaceAll(" ","-")))})})]})};try{eG.displayName||(eG.displayName="ValidationMessage")}catch{}var eW=l(34614);let eU={Octicon_0:"FilterRevert-module__Octicon_0--KHDOC",Link_0:"FilterRevert-module__Link_0--h8G6E"},eQ=({className:e,as:t,onClick:l,href:i})=>(0,a.jsxs)(eW.A,{...(0,r.G)("filter-revert-query"),as:t||"a",href:i,onClick:l,className:(0,n.$)(e,eU.Link_0),children:[(0,a.jsx)(c.UndoIcon,{className:eU.Octicon_0}),"Revert filter changes"]});try{eQ.displayName||(eQ.displayName="FilterRevert")}catch{}let eH=new ev.N,eK=({advancedFilterDialogRef:e,className:t,context:l,"data-testid":i,filterButtonVariant:u="normal",filterValue:d,id:c,initialFilterValue:p,inputRef:v,label:m,onChange:h,onParse:f,onSubmit:_,onKeyDown:g,onValidation:x,placeholder:y,providers:B,settings:k,showValidationMessage:b=!0,variant:N="full",visuallyHideLabel:w=!0,showClearButton:j=!0})=>{let[$,I]=(0,o.useState)([]),C=b&&$.length>0,S=(0,o.useCallback)((e=[],t=eH)=>{JSON.stringify($)!==JSON.stringify(e)&&I(e),x?.(e,t)},[x,$]),F=(0,s.tv)({regular:u,narrow:"button"===N?"normal":"compact"},u),A="string"==typeof d,[T,V]=(0,o.useState)(p||""),D=(0,o.useCallback)(e=>{A||V(e),h?.(e)},[A,h]),E="input"===N&&!_||"input"!==N&&!_,[P,O]=(0,o.useState)(!1);return(0,o.useImperativeHandle)(e,()=>({isAdvancedFilterDialogOpen:P,toggleAdvancedFilterDialog:e=>O(e??!P)}),[P]),(0,a.jsx)(ec.dv,{context:l,inputRef:v,rawFilter:A?d:T,onChange:D,onParse:f,onSubmit:_,onValidation:S,providers:B,settings:{...ed.Fy,...k},variant:N,children:(0,a.jsxs)("div",{id:c,role:"form",className:(0,n.$)("FormControl FormControl--fullWidth",t,ep.Box_1),...(0,r.G)(i??"filter"),children:[(0,a.jsx)("label",{id:`${c}-label`,htmlFor:`${c}-input`,className:`FormControl-label ${w?"sr-only":""}`,...(0,r.G)("filter-bar-label"),children:m}),(0,a.jsxs)("div",{className:ep.Box_0,children:[(0,a.jsxs)(e_,{isStandalone:"button"===N,children:["input"!==N&&(0,a.jsx)(en,{isStandalone:"button"===N,filterButtonVariant:F,dialogOpen:P,setDialogOpen:O}),"button"!==N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,n.$)(ep.Box_2,"input"===N&&ep.leftRounded,E&&ep.rightRounded,_&&ep.hasSubmit),children:[!_&&(0,a.jsx)(eh,{}),(0,a.jsx)(eS,{id:c,placeholder:y,onKeyDown:g,hasValidationMessage:C}),j&&(0,a.jsx)(eu,{})]}),_&&(0,a.jsx)(eA,{})]})]}),(0,a.jsx)(eO,{id:c}),b&&(0,a.jsx)(eG,{messages:$,id:`${c}-validation-message`})]})]})})};eK.displayName="FilterInternal";let eq={},ez=e=>(0,a.jsx)(i.y,{appName:"shared_components",category:"filter",metadata:eq,children:(0,a.jsx)(eK,{...e})});ez.displayName="Filter"},92641:(e,t,l)=>{l.d(t,{xI:()=>_,g0:()=>f});var a=l(74848),i=l(75367),r=l(96540),s=l(491),n=l(44308),o=l(96276),u=l(72082),d=(l(79607),l(91385),l(52123),l(90678)),c=l(71073),p=(l(73272),l(62884)),v=l(14653);p.e;let NoFilterProviderV2=class NoFilterProviderV2 extends v.Q{constructor(e,t){super(e,d.ak.NoValue,t)}};var m=l(82759);let h=(0,r.createContext)(void 0),f=()=>{let e=(0,r.useContext)(h);if(!e)throw Error("useFilterQuery must be used inside a FilterQueryContext");return e},_=({children:e,context:t,customParser:l,filterConfig:p,providers:v,inputRef:f,onChange:_,onParse:g,onSubmit:x,onValidation:y,rawFilter:B})=>{let k=(0,r.useRef)(B??""),b=(0,r.useRef)(l??new o.i(v.filter(e=>!(0,c.B8)(e)),p)),[N,w]=(0,r.useState)(()=>b.current.parse(B,new n.N,-1)),[j,$]=(0,r.useState)(!0),{inputContextRef:I,config:C}=(0,m.U2)(),S="full"===C.variant?"button_and_input":"input"===C.variant?"input_only":"button_only",{sendClickAnalyticsEvent:F}=(0,i.S)();(0,r.useEffect)(()=>{N.staticContext=t},[t,N]);let A=(0,r.useCallback)(()=>{_(""),x?.(new n.N,d.FT.Clear),f.current?.focus()},[f,_,x]),T=(0,r.useMemo)(()=>{let e={},t=[],l=[];if(v.map(a=>{if((0,c.B8)(a))for(let i of a.filterProviders)e[i.key]=i,i.options.filterTypes.valueless&&t.push(i),i.options.filterTypes.hasValue&&l.push(i);else e[a.key]=a,a.options.filterTypes.valueless&&t.push(a),a.options.filterTypes.hasValue&&l.push(a)}),t.length&&(e.no=new NoFilterProviderV2(t.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon})))),l.length){let t=l.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon}));e.has=new u.M(t)}return b.current.filterProviders=Object.values(e),e},[v]),V=(0,r.useCallback)((e,t=!1)=>{y(e.getErrors(t||document.activeElement!==f.current),new n.N(e.raw,e.blocks,p,e.activeBlock))},[p,f,y]),D=(0,r.useCallback)((e,t,l)=>{$(!1),new Promise((t,a)=>{let i=b.current.parse(l??B,N,e);(0,c.Ed)(i,k.current)?(w(i),t(i)):a(Error("Query out of sync, Aborted..."))}).then(e=>b.current.validateFilterQuery(e)).then(e=>new Promise((t,l)=>e&&(0,c.Ed)(e)?(w(e),t(e)):l(Error(e?"Out of sync":"Empty Query, Aborted...")))).then(e=>{t?.(e)}).catch(()=>{})},[N,B]),E=(0,r.useCallback)((e,t)=>{D(e||(I.current?.caretStart??-1),e=>{V(e),t?.(e)})},[I,D,V]),P=(0,r.useCallback)(async(e,t,l)=>{let a=l??N;a.clearActiveBlock();let i=0,r=!1;for(;i<=3;)if((0,c.Ed)(a,B)){x?.(a,e),V(a,!0),r=!0;break}else i+=1,await (0,c.he)(10);r||D(I.current?.caretStart??-1,t=>{(0,c.Ed)(t,B)&&(x?.(t,e),V(a,!0))});let s=N.filtersUsed.length>0?N.filtersUsed.join(","):"";F({action:"submit_filter_query",label:`variant:${S};event_type:${e};used_filter_providers:${s};nested_group_depth:${N.nestedGroupCount};submitted_by:${t??"unnamed_submit_method"}`})},[N,I,x,D,V,B,F,S]),O=(0,r.useCallback)((e,t=-1,l,a)=>{let i=e??N.raw;_?.(i),a&&(k.current=i,D(t,e=>{(0,c.Ed)(e,k.current)&&(l?.(e),x?.(e,a),g?.(e))},i))},[N.raw,_,g,x,D]),R=(0,r.useCallback)(e=>{let[t,l]=b.current.replaceActiveBlockWithPresenceBlock(N,e);I.current?.updateCaretPosition(l),O(t,l)},[N,I,O]),M=(0,r.useCallback)((e,t,l=!1)=>{let[a,i]=b.current.insertSuggestion(N,e,t);I.current?.updateCaretPosition(i),I.current?.updateRawFilterValue(a),O(a,i,void 0,l?d.FT.SuggestionSelected:void 0)},[N,I,O]),L=(0,r.useCallback)(e=>{(B!==k.current||j)&&(k.current=B,D(I.current?.caretStart??-1,t=>{V(t),g?.(t),e(t)}))},[I,j,g,D,V,B]),G=(0,r.useMemo)(()=>({clearFilter:A,filterQuery:N,filterProviders:T,forceReparse:E,insertIntoQuery:M,onSubmit:P,rawFilterRef:k,replaceActiveBlockWithPresenceBlock:R,updateFilter:O,updateFromExternal:L}),[A,T,N,E,M,P,R,O,L]);return(0,a.jsx)(h.Provider,{value:G,children:e})};try{h.displayName||(h.displayName="FilterQueryContext")}catch{}try{_.displayName||(_.displayName="FilterQueryContextProvider")}catch{}},75797:(e,t,l)=>{l.d(t,{Ge:()=>p,NH:()=>m});var a=l(74848),i=l(64515),r=l(96540),s=l(90678),n=l(71073),o=l(82759),u=l(92641),d=l(55581);let c=(0,r.createContext)(void 0),p=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useInput must be used inside a InputContext");return e},v=(e,t,l,a)=>{let i=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value");i?.set?.call(e,t),e.setSelectionRange(l,a??l),e.dispatchEvent(new Event("input",{bubbles:!0})),e.value=t},m=(0,r.forwardRef)(({caretRef:e=null,children:t,inputRef:l=null,value:p="",filterConfig:m},h)=>{let f=(0,r.useRef)(null);(0,i.T)(e,f);let _=(0,r.useRef)(null);(0,i.T)(l,_);let[g,x]=(0,r.useState)(!1),[y,B]=(0,r.useState)(!1),[k,b]=(0,r.useState)(-1),[N,w]=(0,r.useState)(-1),j=(0,r.useRef)(!1),[$,I]=(0,r.useState)(p),C=(0,r.useRef)(0),{hideSuggestions:S,suggestionGroups:F,activeSuggestion:A,setActiveSuggestion:T,suggestionsVisible:V,suggestionSelected:D,updateSuggestions:E}=(0,d.Pt)(),{forceReparse:P,onSubmit:O,rawFilterRef:R,updateFilter:M}=(0,u.g0)(),{config:L}=(0,o.U2)(),G=(0,r.useCallback)((e,t)=>{b(e),w(t??e)},[]);(0,r.useImperativeHandle)(h,()=>({caretStart:k,caretEnd:N,isComposing:j.current,inputHasFocus:y,styledInputBlockCount:C.current,updateCaretPosition:G,updateRawFilterValue:z}));let W=(0,r.useCallback)(e=>{if(j.current)return;let t=(0,n.jh)(F);if("ArrowLeft"===e.key||"ArrowRight"===e.key)S();else if("ArrowDown"===e.key)A+1>=t.length?T(-1):T(A+1),e.preventDefault();else if("ArrowUp"===e.key)A<0?T(t.length-1):T(A-1),e.preventDefault();else if("Enter"===e.key){if(V&&null!==A){let l=t[A];if(l){e.preventDefault(),D(l),_.current?.focus();return}}O(s.FT.ExplicitSubmit,"input_with_enter"),S()}else if("Escape"===e.key)V&&(S(),e.stopPropagation());else if("Home"===e.key||"End"===e.key)T(-1);else if(m.groupAndKeywordSupport&&["("].includes(e.key)||'"'===e.key){let t=e.currentTarget,l=e.key;if(t.selectionStart!==t.selectionEnd&&["(",'"'].includes(l)){let a="("===l?")":'"',i=`${t.value.slice(0,k)}${l}${t.value.slice(k,N)}${a}${t.value.slice(N)}`;v(t,i,k+1,N+1),e.preventDefault();return}let a=t.selectionEnd??t.selectionStart??-1;if('"'===l&&'"'===t.value.charAt(a)){v(t,t.value,k+1),e.preventDefault();return}if(t.value.charAt(a).match(/\w/g)||t.value.charAt(a-1).match(/[\w"]/g))return;if("("===l){for(let[e,l]of(0,n.Dy)(t.value))if(a>e&&a<=l)return}e.preventDefault();let i="("===l?")":'"',r=`${t.value.slice(0,a)}${l}${i}${t.value.slice(a)}`;v(t,r,a+1)}else if("Backspace"===e.key){let t=e.currentTarget,l=t.selectionEnd??-1;if(m.groupAndKeywordSupport&&"("===t.value.charAt(l-1)&&")"===t.value.charAt(l)||'"'===t.value.charAt(l-1)&&'"'===t.value.charAt(l)){e.preventDefault();let a=`${t.value.slice(0,l-1)}${t.value.slice(l+1)}`;v(t,a,l-1)}}},[A,m.groupAndKeywordSupport,S,N,k,O,T,D,F,V]),U=(0,r.useCallback)(()=>{B(!0),g?x(!1):P(-1,async e=>{(0,n.Ed)(e,R?.current)&&await E(e,k)})},[g,P,R,E,k]),Q=(0,r.useCallback)(()=>{g||(B(!1),P(-1),S())},[g,P,S]),H=(0,r.useCallback)(()=>{j.current=!0,S()},[S]),K=(0,r.useCallback)(()=>{j.current=!1},[]),q=(0,r.useCallback)(e=>{let t=e.currentTarget,l=t.value;if(l===$)return;I(l),e.preventDefault();let a="button"!==L.variant?t.selectionStart??-1:-1,i="button"!==L.variant?t.selectionEnd??-1:-1;M(l,a,e=>{E(e,a)}),G(a,i)},[L.variant,M,G,E,$]),z=(0,r.useCallback)(e=>{e!==$&&(I(e),M(e,-1))},[$,M]),X=(0,r.useCallback)(e=>{C.current=e},[]),J=(0,r.useCallback)(()=>{x(!0)},[]),Y=(0,r.useMemo)(()=>({caretRef:f,inputFocused:y,inputKeyDown:W,inputOnBlur:Q,inputOnCompositionStart:H,inputOnCompositionEnd:K,inputOnChange:q,inputOnFocus:U,inputRef:_,inputSelectionEnd:N,inputSelectionStart:k,inputValue:$,suspendFocus:J,updateInputSelection:G,updateStyledInputBlockCount:X}),[y,W,Q,H,K,q,U,N,k,$,J,G,X]);return(0,a.jsx)(c.Provider,{value:Y,children:t})});m.displayName="InputContextProvider";try{c.displayName||(c.displayName="InputContext")}catch{}},16099:(e,t,l)=>{l.d(t,{U2:()=>c,dv:()=>p});var a=l(74848),i=l(64515),r=l(96540),s=l(52123),n=l(92641),o=l(75797),u=l(55581);let d=(0,r.createContext)(void 0),c=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useFilter must be used inside a FilterProvider");return e},p=({children:e,context:t,customParser:l,rawFilter:c,filterDelimiter:p=s.a7.filterDelimiter,inputRef:v=null,onChange:m,onParse:h,onSubmit:f,onValidation:_,providers:g,settings:x,valueDelimiter:y=s.a7.valueDelimiter,variant:B})=>{let k=(0,r.useMemo)(()=>({filterDelimiter:p,valueDelimiter:y,...s.Fy,...x,variant:B}),[p,x,y,B]),b=(0,r.useRef)(null);(0,i.T)(v,b);let N=(0,r.useRef)(null),w=(0,r.useRef)(null),j=(0,r.useId)(),$=(0,r.useMemo)(()=>({config:k,id:j,inputContextRef:w}),[k,j,w]);return(0,r.useEffect)(()=>{w.current?.updateRawFilterValue(c)},[c]),(0,a.jsx)(d.Provider,{value:$,children:(0,a.jsx)(n.xI,{customParser:l,context:t,filterConfig:k,providers:g,inputRef:b,onChange:m,onParse:h,onSubmit:f,onValidation:_,rawFilter:c,children:(0,a.jsx)(u.Yl,{caretRef:N,inputRef:b,children:(0,a.jsx)(o.NH,{caretRef:N,inputRef:b,ref:w,value:c,filterConfig:k,children:e})})})})};try{d.displayName||(d.displayName="FilterContext")}catch{}try{p.displayName||(p.displayName="FilterContextProvider")}catch{}},55581:(e,t,l)=>{let a;l.d(t,{Rx:()=>B,Yl:()=>b,Pt:()=>y});var i=l(74848),r=l(70170),s=l(17515),n=l(96540),o=l(18991),u=l(69676),d=l(81425),c=l(58748);let p=/:|,|\s(?=(?:[^"]*"[^"]*")*[^"]*$)/g;var v=l(90678),m=l(71073),h=l(52811);let f=(e="",t=!0)=>{a&&clearTimeout(a),a=setTimeout(()=>{(0,h.i)(e,{assertive:t})},150)};var _=l(92641),g=l(16099);let x=(0,n.createContext)(void 0),y=()=>{let e=(0,n.useContext)(x);if(!e)throw Error("useSuggestions must be used inside a SuggestionsContext");return e},B=25;function k(e,t){let l=(t?.value.values??[]).map(e=>(0,m.M5)(e.value)),a=e.suggestions.filter(e=>{let t=(0,m.I8)(e.value)??"";return!l.includes(t)});return{...e,suggestions:a}}let b=({children:e,caretRef:t,inputRef:l})=>{let{config:a,inputContextRef:h}=(0,g.U2)(),{filterQuery:y,filterProviders:b,insertIntoQuery:N,rawFilterRef:w,replaceActiveBlockWithPresenceBlock:j,updateFilter:$,updateFromExternal:I}=(0,_.g0)(),C=(0,n.useRef)(null),S=(0,n.useRef)(null),{position:F,updatePosition:A}=function(e,t=[]){let l=(0,d.L)(e?.floatingElementRef),a=(0,d.L)(e?.caretElementRef),i=(0,d.L)(e?.inputElementRef),[r,o]=(0,n.useState)(void 0),v=()=>{let e,t=Array.from(i.current?.closest(".styled-input-container")?.querySelectorAll(".delimiter")??[]),l=i.current?.value;if(!l||!i.current.selectionStart)return null;let a=[...l.slice(0,i.current.selectionStart).matchAll(p)];if(a.length<1)return i.current;for(let l=a.length??0;l>0;l--){let a=t?.[l-1];if(a&&!a?.classList.contains("text-delimiter")){e=a;break}}return e??i.current},m=(0,n.useCallback)(()=>{let t=v()??i.current;l.current instanceof Element&&t instanceof Element?o((0,u.uG)(l.current,t,e)):o(void 0)},[l,a,...t]);return(0,s.N)(m,[m]),(0,c.w)(m),{floatingElementRef:l,caretElementRef:a,position:r,updatePosition:m}}({caretElementRef:t,floatingElementRef:S,inputElementRef:l,side:"outside-bottom",align:"start",alignmentOffset:-16,allowOutOfBounds:!1},[S.current,h.current?.styledInputBlockCount]),[T,V]=(0,n.useState)(!1),[D,E]=(0,n.useState)(!1),[P,O]=(0,n.useState)([]),[R,M]=(0,n.useState)(-1),L=(0,n.useCallback)(()=>{D||E(!0)},[D]),G=(0,n.useCallback)(()=>{E(!1),M(-1)},[]),W=(0,r.s)(f,500,{start:!1}),U=(0,n.useCallback)(async(e,t)=>{let i=!0;if("button"===a.variant||h.current?.isComposing)return;O([]),A();let r=e??y,s=t??l.current?.selectionStart??-1,n={id:"cached-suggestions",suggestions:[]},u=n,d=[],c=r.activeBlock,p=c&&(0,m.v7)(c)?c:void 0,f=c?(0,m.DS)(c,s):"",_=f&&p&&p.provider?.isCompleteResultSetQuery?.(f);if(p){let[e]=(0,m.t4)(p,s);"value"===e&&f&&(u=k(n={id:"cached-suggestions",suggestions:p.provider?.findPrefetchedSuggestions?.(f)??[]},p))&&u.suggestions.length>0&&(L(),W(`${u.suggestions.length} ${1===u.suggestions.length?"suggestion":"suggestions"}`),O([u]))}if(u.suggestions.length<B&&!_){p&&p.provider?.isCompleteResultSetQuery?.(f)!==void 0&&V(!0),d=await r.getSuggestions(s,b,a),d[0]?.suggestions.unshift(...n.suggestions);let e=new Set;d[0]&&(d[0].suggestions=d[0]?.suggestions.filter(t=>{let l=(0,m.I8)(t.value)??"";return!e.has(l)&&e.add(l)})),d[0]&&c?.type===v._B.Text&&c.raw.startsWith("-")&&(d[0].title=o.D.exclude)}else d=[n];if(p){let e=(0,m.DS)(p,s),t=d[0]?.suggestions;1===d.length&&t&&(0,m.I8)(t[0]?.value)===e&&e.length>0&&(1===t.length?i=!1:0===t.filter(t=>{let l=(0,m.I8)(t.value);return l!==e&&l?.startsWith(e)}).length&&(i=!1))}if(d[0]&&(d[0]=k(d[0],p),d[0].suggestions=d[0].suggestions.slice(0,B)),(0,m.Ed)(r,w?.current)&&r.isValidated){let e=d.reduce((e,t)=>e+t.suggestions.length,0);document.activeElement===l.current&&e>0&&W(`${e} ${1===e?"suggestion":"suggestions"}`,!1),O(d),0===n.suggestions.length&&M(-1),d.length>0&&i&&h.current?.inputHasFocus?L():G()}V(!1)},[a,y,l,b,L,A,w,h,G,W]),Q=(0,n.useCallback)(e=>{let t;M(-1);let i=y.activeBlock,r=e.value.toString().startsWith("-"),s=!1;if(e.value===o.D.dividerValue)return;"keyword"===e.type?t=(0,m.jQ)(e.value):i&&i.type===v._B.Filter?r?t=(0,m.jQ)(e.value):(t=(0,m.jQ)(e.value),s=!0,G()):"-"===(t=(0,m.jQ)(e.value))||t?.endsWith(".")||(t+=a.filterDelimiter);let n=l.current?.selectionStart??-1;e.type===v.ak.NoValue?j("no"):e.type===v.ak.HasValue?j("has"):t?N(t,n,s):$()},[a.filterDelimiter,y.activeBlock,G,l,N,j,$]);(0,s.N)(()=>{I(async e=>{(0,m.Ed)(e,w?.current)&&await U(e,l.current?.selectionStart??-1)})},[w,U,y.raw,y,I,l]);let H=(0,n.useMemo)(()=>({activeSuggestion:R,hideSuggestions:G,isFetchingSuggestions:T,position:F,showSuggestions:L,suggestionGroups:P,suggestionsListRef:S,suggestionSelected:Q,suggestionsVisible:D,setActiveSuggestion:M,updateSuggestions:U,activeSuggestionRef:C}),[R,C,G,T,F,L,P,Q,D,U]);return(0,i.jsx)(x.Provider,{value:H,children:e})};try{x.displayName||(x.displayName="SuggestionsContext")}catch{}try{b.displayName||(b.displayName="SuggestionsContextProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_filter_Filter_tsx-b95c76a60687.js.map